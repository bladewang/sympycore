"""
This file is generated by the src/mk_pairs_ops.py script.
See http://sympycore.googlecode.com/ for more information.

DO NOT CHANGE THIS FILE DIRECTLY!!!
"""

from ..utils import NUMBER, SYMBOL, TERMS, FACTORS
from ..arithmetic.numbers import (normalized_fraction,
  FractionTuple, try_power, numbertypes)
from ..arithmetic.infinity import Infinity


def div(a, b, cls):
    tb = type(b)
    if tb is int or tb is long:
        ta = type(a)
        if ta is int or tb is long:
            if not b:
                if not a:
                    return cls.undefined
                return cls.zoo
            return normalized_fraction(a, b)
        if not b:
            return a * cls.zoo
        if b == 1:
            return a
        return a * FractionTuple((1,b))
    return a / b




def neg_method(self, NUMBER=NUMBER, TERMS=TERMS, new=object.__new__):
    cls = self.__class__
    lhead = self.head
    if lhead is NUMBER:
        #NEG_NUMBER(OP=self)
        #RETURN_NEW(HEAD=NUMBER; DATA=-self.data)
        #NEWINSTANCE(OBJ=_tmp9; HEAD=NUMBER; DATA=-self.data)
        _tmp9 = new(cls)
        _tmp9.head = NUMBER
        _tmp9.data = -self.data
        return _tmp9
    elif lhead is TERMS:
        #NEG_TERMS(OP=self)
        op_pairs = self.data
        if len(op_pairs)==1:
            t, c = op_pairs.items()[0]
            c = -c
            if c==1:
                return t
            #RETURN_NEW(HEAD=TERMS; DATA={t:c})
            #NEWINSTANCE(OBJ=_tmp30; HEAD=TERMS; DATA={t:c})
            _tmp30 = new(cls)
            _tmp30.head = TERMS
            _tmp30.data = {t:c}
            return _tmp30
        #NEG_DICT_VALUES(DICT_IN=self.data; DICT_OUT=pairs)
        pairs = dict([(t, -c) for t,c in self.data.iteritems()])
        #RETURN_NEW(HEAD=TERMS; DATA=pairs)
        #NEWINSTANCE(OBJ=_tmp51; HEAD=TERMS; DATA=pairs)
        _tmp51 = new(cls)
        _tmp51.head = TERMS
        _tmp51.data = pairs
        return _tmp51
    else:
        #NEG_SYMBOL(OP=self)
        #RETURN_NEW(HEAD=TERMS; DATA={self: -1})
        #NEWINSTANCE(OBJ=_tmp72; HEAD=TERMS; DATA={self: -1})
        _tmp72 = new(cls)
        _tmp72.head = TERMS
        _tmp72.data = {self: -1}
        return _tmp72

def rsub_method(self, other, NUMBER=NUMBER, TERMS=TERMS, FACTORS=FACTORS, new=object.__new__):
    cls = self.__class__
    lhead = self.head
    if isinstance(other, cls.coefftypes):
        if lhead is NUMBER:
            #SUB_VALUE_NUMBER(VALUE=other; RHS=self)
            #RETURN_NEW(HEAD=NUMBER; DATA=other - self.data)
            #NEWINSTANCE(OBJ=_tmp93; HEAD=NUMBER; DATA=other - self.data)
            _tmp93 = new(cls)
            _tmp93.head = NUMBER
            _tmp93.data = other - self.data
            return _tmp93
        elif lhead is TERMS:
            #SUB_VALUE_TERMS(VALUE=other; RHS=self)
            _tmp107 = other
            if not _tmp107:
                #NEG_TERMS(OP=self)
                op_pairs = self.data
                if len(op_pairs)==1:
                    t, c = op_pairs.items()[0]
                    c = -c
                    if c==1:
                        return t
                    #RETURN_NEW(HEAD=TERMS; DATA={t:c})
                    #NEWINSTANCE(OBJ=_tmp121; HEAD=TERMS; DATA={t:c})
                    _tmp121 = new(cls)
                    _tmp121.head = TERMS
                    _tmp121.data = {t:c}
                    return _tmp121
                #NEG_DICT_VALUES(DICT_IN=self.data; DICT_OUT=pairs)
                pairs = dict([(t, -c) for t,c in self.data.iteritems()])
                #RETURN_NEW(HEAD=TERMS; DATA=pairs)
                #NEWINSTANCE(OBJ=_tmp142; HEAD=TERMS; DATA=pairs)
                _tmp142 = new(cls)
                _tmp142.head = TERMS
                _tmp142.data = pairs
                return _tmp142
            #NEG_DICT_VALUES(DICT_IN=self.data; DICT_OUT=pairs)
            pairs = dict([(t, -c) for t,c in self.data.iteritems()])
            #ADD_VALUE_DICT(DICT=pairs; VALUE=_tmp107)
            #ADD_TERM_VALUE_DICT(TERM=cls.one; VALUE=_tmp107; DICT=pairs; DICT_GET=pairs.get; SIGN=+; USIGN=)
            _tmp170 = pairs.get(cls.one)
            if _tmp170 is None:
                pairs[cls.one] =  _tmp107
            else:
                _tmp170 = _tmp170 + _tmp107
                if _tmp170:
                    pairs[cls.one] = _tmp170
                else:
                    del pairs[cls.one]
            #RETURN_NEW(HEAD=TERMS; DATA=pairs)
            #NEWINSTANCE(OBJ=_tmp177; HEAD=TERMS; DATA=pairs)
            _tmp177 = new(cls)
            _tmp177.head = TERMS
            _tmp177.data = pairs
            return _tmp177
        else:
            #SUB_VALUE_SYMBOL(VALUE=other; RHS=self)
            _tmp191 = other
            if not _tmp191:
                #RETURN_NEW(HEAD=TERMS; DATA={self: -1})
                #NEWINSTANCE(OBJ=_tmp198; HEAD=TERMS; DATA={self: -1})
                _tmp198 = new(cls)
                _tmp198.head = TERMS
                _tmp198.data = {self: -1}
                return _tmp198
            #RETURN_NEW(HEAD=TERMS; DATA={cls.one: _tmp191, self: -1})
            #NEWINSTANCE(OBJ=_tmp212; HEAD=TERMS; DATA={cls.one: _tmp191, self: -1})
            _tmp212 = new(cls)
            _tmp212.head = TERMS
            _tmp212.data = {cls.one: _tmp191, self: -1}
            return _tmp212
    other = cls.convert(other, False)
    if other is NotImplemented:
        return other
    return other - self

def rdiv_method(self, other, NUMBER=NUMBER, TERMS=TERMS, FACTORS=FACTORS, new=object.__new__):
    cls = self.__class__
    lhead = self.head
    if isinstance(other, cls.coefftypes):
        if lhead is NUMBER:
            #DIV_VALUE_NUMBER(VALUE=other; RHS=self)
            #RETURN_NEW2(HEAD=NUMBER; DATA=div(other, self.data, cls))
            _tmp233 = div(other, self.data, cls)
            if isinstance(_tmp233, Infinity):
                return _tmp233
            #RETURN_NEW(HEAD=NUMBER; DATA=_tmp233)
            #NEWINSTANCE(OBJ=_tmp240; HEAD=NUMBER; DATA=_tmp233)
            _tmp240 = new(cls)
            _tmp240.head = NUMBER
            _tmp240.data = _tmp233
            return _tmp240
        elif lhead is TERMS:
            #DIV_VALUE_TERMS(VALUE=other; RHS=self)
            _tmp254 = other
            if not _tmp254:
                return cls.zero
            pairs = self.data
            if len(pairs)==1:
                t, c = pairs.items()[0]
                c = div(other, c, cls)
                t = 1/t
                if c==1:
                    return t
                if t==cls.one:
                    return cls.convert(c)
                #RETURN_NEW(HEAD=TERMS; DATA={t: c})
                #NEWINSTANCE(OBJ=_tmp261; HEAD=TERMS; DATA={t: c})
                _tmp261 = new(cls)
                _tmp261.head = TERMS
                _tmp261.data = {t: c}
                return _tmp261
            #NEWINSTANCE(OBJ=_tmp254; HEAD=FACTORS; DATA={self: -1})
            _tmp254 = new(cls)
            _tmp254.head = FACTORS
            _tmp254.data = {self: -1}
            if other==1:
                return _tmp254
            #RETURN_NEW(HEAD=TERMS; DATA={_tmp254: other})
            #NEWINSTANCE(OBJ=_tmp282; HEAD=TERMS; DATA={_tmp254: other})
            _tmp282 = new(cls)
            _tmp282.head = TERMS
            _tmp282.data = {_tmp254: other}
            return _tmp282
        elif lhead is FACTORS:
            #DIV_VALUE_FACTORS(VALUE=other; RHS=self)
            
            pairs = self.data
            if len(pairs)==1:
                t, c = pairs.items()[0]
                c = -c
                if c==1:
                    return t * other
                new_pairs = {t: c}
            else:
                #NEG_DICT_VALUES(DICT_IN=pairs; DICT_OUT=new_pairs)
                new_pairs = dict([(t, -c) for t,c in pairs.iteritems()])
            #NEWINSTANCE(OBJ=_tmp296; HEAD=FACTORS; DATA=new_pairs)
            _tmp296 = new(cls)
            _tmp296.head = FACTORS
            _tmp296.data = new_pairs
            if other==1:
                return _tmp296
            #RETURN_NEW(HEAD=TERMS; DATA={_tmp296: other})
            #NEWINSTANCE(OBJ=_tmp317; HEAD=TERMS; DATA={_tmp296: other})
            _tmp317 = new(cls)
            _tmp317.head = TERMS
            _tmp317.data = {_tmp296: other}
            return _tmp317
        else:
            #DIV_VALUE_SYMBOL(VALUE=other; RHS=self)
            _tmp331 = other
            if not _tmp331:
                return cls.zero
            #NEWINSTANCE(OBJ=obj2; HEAD=FACTORS; DATA={self: -1})
            obj2 = new(cls)
            obj2.head = FACTORS
            obj2.data = {self: -1}
            if _tmp331==1:
                return obj2
            #RETURN_NEW(HEAD=TERMS; DATA={obj2: _tmp331})
            #NEWINSTANCE(OBJ=_tmp345; HEAD=TERMS; DATA={obj2: _tmp331})
            _tmp345 = new(cls)
            _tmp345.head = TERMS
            _tmp345.data = {obj2: _tmp331}
            return _tmp345
    other = cls.convert(other, False)
    if other is NotImplemented:
        return other
    return other / self

def pow_method(self, other, z = None, NUMBER=NUMBER, TERMS=TERMS, FACTORS=FACTORS, new=object.__new__):
    cls = self.__class__
    lhead = self.head
    type_other = type(other)
    if type_other is cls and other.head is NUMBER:
        other = other.data
        type_other = type(other)
    if type_other is int or type_other is long:
        if not other:
            return cls.one
        if other==1:
            return self
        if lhead is NUMBER:
            #POW_NUMBER_INT(VALUE=other; LHS=self)
            if other < 0:
                #RETURN_NEW(HEAD=NUMBER; DATA=div(1, (self.data)**(-other), cls))
                #NEWINSTANCE(OBJ=_tmp366; HEAD=NUMBER; DATA=div(1, (self.data)**(-other), cls))
                _tmp366 = new(cls)
                _tmp366.head = NUMBER
                _tmp366.data = div(1, (self.data)**(-other), cls)
                return _tmp366
            #RETURN_NEW(HEAD=NUMBER; DATA=(self.data)**(other))
            #NEWINSTANCE(OBJ=_tmp380; HEAD=NUMBER; DATA=(self.data)**(other))
            _tmp380 = new(cls)
            _tmp380.head = NUMBER
            _tmp380.data = (self.data)**(other)
            return _tmp380
        elif lhead is TERMS:
            #POW_TERMS_INT(VALUE=other; LHS=self)
            pairs = self.data
            if len(pairs)==1:
                t,c = pairs.items()[0]
                if other < 0:
                    c = div(1, c**(-other), cls)
                else:
                    c = c ** (other)
                t = t**(other)
                if c==1:
                    return t
                #RETURN_NEW(HEAD=TERMS; DATA={t:c})
                #NEWINSTANCE(OBJ=_tmp401; HEAD=TERMS; DATA={t:c})
                _tmp401 = new(cls)
                _tmp401.head = TERMS
                _tmp401.data = {t:c}
                return _tmp401
            #RETURN_NEW(HEAD=FACTORS; DATA={self: other})
            #NEWINSTANCE(OBJ=_tmp415; HEAD=FACTORS; DATA={self: other})
            _tmp415 = new(cls)
            _tmp415.head = FACTORS
            _tmp415.data = {self: other}
            return _tmp415
        elif lhead is FACTORS:
            #POW_FACTORS_INT(VALUE=other; LHS=self)
            #MUL_DICT_VALUES(DICT_IN=self.data; DICT_OUT=pairs; OP=other)
            pairs = dict([(t, c*other) for t,c in self.data.iteritems()])
            if len(pairs)==1:
                t, c = pairs.items()[0]
                if c==1:
                    return t
            #RETURN_NEW(HEAD=FACTORS; DATA=pairs)
            #NEWINSTANCE(OBJ=_tmp443; HEAD=FACTORS; DATA=pairs)
            _tmp443 = new(cls)
            _tmp443.head = FACTORS
            _tmp443.data = pairs
            return _tmp443
        else:
            #POW_SYMBOL_INT(VALUE=other; LHS=self)
            #RETURN_NEW(HEAD=FACTORS; DATA={self: other})
            #NEWINSTANCE(OBJ=_tmp464; HEAD=FACTORS; DATA={self: other})
            _tmp464 = new(cls)
            _tmp464.head = FACTORS
            _tmp464.data = {self: other}
            return _tmp464
    if lhead is NUMBER and isinstance(other, cls.exptypes):
        #POW_NUMBER_VALUE(VALUE=other; LHS=self)
        z, sym = try_power(self.data, other)
        if not sym:
            #RETURN_NEW(HEAD=NUMBER; DATA=z)
            #NEWINSTANCE(OBJ=_tmp485; HEAD=NUMBER; DATA=z)
            _tmp485 = new(cls)
            _tmp485.head = NUMBER
            _tmp485.data = z
            return _tmp485
        factors = {}
        for t,c in sym:
            factors[cls.convert(t)] = c
        #NEWINSTANCE(OBJ=_tmp478; HEAD=FACTORS; DATA=factors)
        _tmp478 = new(cls)
        _tmp478.head = FACTORS
        _tmp478.data = factors
        if z==1:
            return _tmp478
        #RETURN_NEW(HEAD=TERMS; DATA={_tmp478: z})
        #NEWINSTANCE(OBJ=_tmp506; HEAD=TERMS; DATA={_tmp478: z})
        _tmp506 = new(cls)
        _tmp506.head = TERMS
        _tmp506.data = {_tmp478: z}
        return _tmp506
    if type_other is FractionTuple:
        if lhead is TERMS:
            #POW_TERMS_FRAC(VALUE=other; LHS=self)
            pairs = self.data
            if len(pairs)==1:
                t, c = pairs.items()[0]
                if isinstance(c, numbertypes) and not c==-1:
                    if c < 0:
                        z, sym = try_power(-c, other)
                        factors = {-t: other}
                    else:
                        z, sym = try_power(c, other)
                        factors = {t: other}
                    for t,c in sym:
                        factors[cls.convert(t)] = c
                    #NEWINSTANCE(OBJ=_tmp520; HEAD=FACTORS; DATA=factors)
                    _tmp520 = new(cls)
                    _tmp520.head = FACTORS
                    _tmp520.data = factors
                    if z==1:
                        return _tmp520
                    #RETURN_NEW(HEAD=TERMS; DATA={_tmp520: z})
                    #NEWINSTANCE(OBJ=_tmp534; HEAD=TERMS; DATA={_tmp520: z})
                    _tmp534 = new(cls)
                    _tmp534.head = TERMS
                    _tmp534.data = {_tmp520: z}
                    return _tmp534
            #RETURN_NEW(HEAD=FACTORS; DATA={self: other})
            #NEWINSTANCE(OBJ=_tmp548; HEAD=FACTORS; DATA={self: other})
            _tmp548 = new(cls)
            _tmp548.head = FACTORS
            _tmp548.data = {self: other}
            return _tmp548
        else:
            #POW_SYMBOL_FRAC(VALUE=other; LHS=self)
            #RETURN_NEW(HEAD=FACTORS; DATA={self: other})
            #NEWINSTANCE(OBJ=_tmp569; HEAD=FACTORS; DATA={self: other})
            _tmp569 = new(cls)
            _tmp569.head = FACTORS
            _tmp569.data = {self: other}
            return _tmp569
    if type_other is cls or isinstance(other, cls.exptypes):
        if lhead is FACTORS:
            #POW_FACTORS_SYMBOL(LHS=self; RHS=other)
            pairs = self.data
            if len(pairs)==1:
                t, c = pairs.items()[0]
                tc = type(c)
                if tc is int or tc is long:
                    #RETURN_NEW(HEAD=FACTORS; DATA={t: other * c})
                    #NEWINSTANCE(OBJ=_tmp590; HEAD=FACTORS; DATA={t: other * c})
                    _tmp590 = new(cls)
                    _tmp590.head = FACTORS
                    _tmp590.data = {t: other * c}
                    return _tmp590
            #RETURN_NEW(HEAD=FACTORS; DATA={self: other})
            #NEWINSTANCE(OBJ=_tmp604; HEAD=FACTORS; DATA={self: other})
            _tmp604 = new(cls)
            _tmp604.head = FACTORS
            _tmp604.data = {self: other}
            return _tmp604
        #RETURN_NEW(HEAD=FACTORS; DATA={self: other})
        #NEWINSTANCE(OBJ=_tmp618; HEAD=FACTORS; DATA={self: other})
        _tmp618 = new(cls)
        _tmp618.head = FACTORS
        _tmp618.data = {self: other}
        return _tmp618
    return NotImplemented

def add_method(self, other, NUMBER=NUMBER, TERMS=TERMS, FACTORS=FACTORS, new=object.__new__):
    cls = self.__class__
    lhead = self.head
    if type(other) is not cls:
        if isinstance(other, cls.coefftypes):
            if lhead is NUMBER:
                #ADD_NUMBER_VALUE(VALUE=other; LHS=self)
                #RETURN_NEW(HEAD=NUMBER; DATA=self.data + other)
                #NEWINSTANCE(OBJ=_tmp639; HEAD=NUMBER; DATA=self.data + other)
                _tmp639 = new(cls)
                _tmp639.head = NUMBER
                _tmp639.data = self.data + other
                return _tmp639
            elif lhead is TERMS:
                #ADD_TERMS_VALUE(VALUE=other; LHS=self)
                #ADD_VALUE_TERMS(VALUE=other; RHS=self)
                _tmp660 = other
                if not _tmp660:
                    return self
                pairs = dict(self.data)
                #ADD_VALUE_DICT(DICT=pairs; VALUE=_tmp660)
                #ADD_TERM_VALUE_DICT(TERM=cls.one; VALUE=_tmp660; DICT=pairs; DICT_GET=pairs.get; SIGN=+; USIGN=)
                _tmp674 = pairs.get(cls.one)
                if _tmp674 is None:
                    pairs[cls.one] =  _tmp660
                else:
                    _tmp674 = _tmp674 + _tmp660
                    if _tmp674:
                        pairs[cls.one] = _tmp674
                    else:
                        del pairs[cls.one]
                #RETURN_NEW(HEAD=TERMS; DATA=pairs)
                #NEWINSTANCE(OBJ=_tmp681; HEAD=TERMS; DATA=pairs)
                _tmp681 = new(cls)
                _tmp681.head = TERMS
                _tmp681.data = pairs
                return _tmp681
            else:
                #ADD_SYMBOL_VALUE(VALUE=other; LHS=self)
                #ADD_VALUE_SYMBOL(VALUE=other; RHS=self)
                _tmp702 = other
                if not _tmp702:
                    return self
                #RETURN_NEW(HEAD=TERMS; DATA={cls.one: _tmp702, self: 1})
                #NEWINSTANCE(OBJ=_tmp709; HEAD=TERMS; DATA={cls.one: _tmp702, self: 1})
                _tmp709 = new(cls)
                _tmp709.head = TERMS
                _tmp709.data = {cls.one: _tmp702, self: 1}
                return _tmp709
        other = cls.convert(other, False)
        if other is NotImplemented:
            return other
    rhead = other.head
    if lhead is NUMBER:
        if rhead is NUMBER:
            #ADD_NUMBER_NUMBER(LHS=self; RHS=other)
            #ADD_VALUE_NUMBER(VALUE=self.data; RHS=other)
            #RETURN_NEW(HEAD=NUMBER; DATA=self.data + other.data)
            #NEWINSTANCE(OBJ=_tmp737; HEAD=NUMBER; DATA=self.data + other.data)
            _tmp737 = new(cls)
            _tmp737.head = NUMBER
            _tmp737.data = self.data + other.data
            return _tmp737
        elif rhead is TERMS:
            #ADD_NUMBER_TERMS(LHS=self; RHS=other)
            #ADD_VALUE_TERMS(VALUE=self.data; RHS=other)
            _tmp758 = self.data
            if not _tmp758:
                return other
            pairs = dict(other.data)
            #ADD_VALUE_DICT(DICT=pairs; VALUE=_tmp758)
            #ADD_TERM_VALUE_DICT(TERM=cls.one; VALUE=_tmp758; DICT=pairs; DICT_GET=pairs.get; SIGN=+; USIGN=)
            _tmp772 = pairs.get(cls.one)
            if _tmp772 is None:
                pairs[cls.one] =  _tmp758
            else:
                _tmp772 = _tmp772 + _tmp758
                if _tmp772:
                    pairs[cls.one] = _tmp772
                else:
                    del pairs[cls.one]
            #RETURN_NEW(HEAD=TERMS; DATA=pairs)
            #NEWINSTANCE(OBJ=_tmp779; HEAD=TERMS; DATA=pairs)
            _tmp779 = new(cls)
            _tmp779.head = TERMS
            _tmp779.data = pairs
            return _tmp779
        else:
            #ADD_NUMBER_SYMBOL(LHS=self; RHS=other)
            #ADD_VALUE_SYMBOL(VALUE=self.data; RHS=other)
            _tmp800 = self.data
            if not _tmp800:
                return other
            #RETURN_NEW(HEAD=TERMS; DATA={cls.one: _tmp800, other: 1})
            #NEWINSTANCE(OBJ=_tmp807; HEAD=TERMS; DATA={cls.one: _tmp800, other: 1})
            _tmp807 = new(cls)
            _tmp807.head = TERMS
            _tmp807.data = {cls.one: _tmp800, other: 1}
            return _tmp807
    elif lhead is TERMS:
        if rhead is NUMBER:
            #ADD_TERMS_NUMBER(LHS=self; RHS=other)
            #ADD_TERMS_VALUE(VALUE=other.data; LHS=self)
            #ADD_VALUE_TERMS(VALUE=other.data; RHS=self)
            _tmp835 = other.data
            if not _tmp835:
                return self
            pairs = dict(self.data)
            #ADD_VALUE_DICT(DICT=pairs; VALUE=_tmp835)
            #ADD_TERM_VALUE_DICT(TERM=cls.one; VALUE=_tmp835; DICT=pairs; DICT_GET=pairs.get; SIGN=+; USIGN=)
            _tmp849 = pairs.get(cls.one)
            if _tmp849 is None:
                pairs[cls.one] =  _tmp835
            else:
                _tmp849 = _tmp849 + _tmp835
                if _tmp849:
                    pairs[cls.one] = _tmp849
                else:
                    del pairs[cls.one]
            #RETURN_NEW(HEAD=TERMS; DATA=pairs)
            #NEWINSTANCE(OBJ=_tmp856; HEAD=TERMS; DATA=pairs)
            _tmp856 = new(cls)
            _tmp856.head = TERMS
            _tmp856.data = pairs
            return _tmp856
        elif rhead is TERMS:
            #ADD_TERMS_TERMS(LHS=self; RHS=other)
            pairs = dict(self.data)
            pairs_get = pairs.get
            for t,c in other.data.iteritems():
                #ADD_TERM_VALUE_DICT(TERM=t; VALUE=c; DICT=pairs; DICT_GET=pairs_get; SIGN=+; USIGN=)
                _tmp877 = pairs_get(t)
                if _tmp877 is None:
                    pairs[t] =  c
                else:
                    _tmp877 = _tmp877 + c
                    if _tmp877:
                        pairs[t] = _tmp877
                    else:
                        del pairs[t]
            #CANONIZE_TERMS_DICT(DICT=pairs)
            if not pairs:
                return cls.zero
            if len(pairs)==1:
               t, c = pairs.items()[0]
               if c==1:
                   return t
               if t==cls.one:
                   return cls.convert(c)
            #RETURN_NEW(HEAD=TERMS; DATA=pairs)
            #NEWINSTANCE(OBJ=_tmp891; HEAD=TERMS; DATA=pairs)
            _tmp891 = new(cls)
            _tmp891.head = TERMS
            _tmp891.data = pairs
            return _tmp891
        else:
            #ADD_TERMS_SYMBOL(LHS=self; RHS=other)
            pairs = dict(self.data)
            #ADD_TERM_VALUE_DICT(TERM=other; VALUE=1; DICT=pairs; DICT_GET=pairs.get; SIGN=+; USIGN=)
            _tmp912 = pairs.get(other)
            if _tmp912 is None:
                pairs[other] =  1
            else:
                _tmp912 = _tmp912 + 1
                if _tmp912:
                    pairs[other] = _tmp912
                else:
                    del pairs[other]
            #CANONIZE_TERMS_DICT(DICT=pairs)
            if not pairs:
                return cls.zero
            if len(pairs)==1:
               t, c = pairs.items()[0]
               if c==1:
                   return t
               if t==cls.one:
                   return cls.convert(c)
            #RETURN_NEW(HEAD=TERMS; DATA=pairs)
            #NEWINSTANCE(OBJ=_tmp926; HEAD=TERMS; DATA=pairs)
            _tmp926 = new(cls)
            _tmp926.head = TERMS
            _tmp926.data = pairs
            return _tmp926
    else:
        if rhead is NUMBER:
            #ADD_SYMBOL_NUMBER(LHS=self; RHS=other)
            #ADD_SYMBOL_VALUE(VALUE=other.data; LHS=self)
            #ADD_VALUE_SYMBOL(VALUE=other.data; RHS=self)
            _tmp954 = other.data
            if not _tmp954:
                return self
            #RETURN_NEW(HEAD=TERMS; DATA={cls.one: _tmp954, self: 1})
            #NEWINSTANCE(OBJ=_tmp961; HEAD=TERMS; DATA={cls.one: _tmp954, self: 1})
            _tmp961 = new(cls)
            _tmp961.head = TERMS
            _tmp961.data = {cls.one: _tmp954, self: 1}
            return _tmp961
        elif rhead is TERMS:
            #ADD_SYMBOL_TERMS(LHS=self; RHS=other)
            #ADD_TERMS_SYMBOL(LHS=other; RHS=self)
            pairs = dict(other.data)
            #ADD_TERM_VALUE_DICT(TERM=self; VALUE=1; DICT=pairs; DICT_GET=pairs.get; SIGN=+; USIGN=)
            _tmp989 = pairs.get(self)
            if _tmp989 is None:
                pairs[self] =  1
            else:
                _tmp989 = _tmp989 + 1
                if _tmp989:
                    pairs[self] = _tmp989
                else:
                    del pairs[self]
            #CANONIZE_TERMS_DICT(DICT=pairs)
            if not pairs:
                return cls.zero
            if len(pairs)==1:
               t, c = pairs.items()[0]
               if c==1:
                   return t
               if t==cls.one:
                   return cls.convert(c)
            #RETURN_NEW(HEAD=TERMS; DATA=pairs)
            #NEWINSTANCE(OBJ=_tmp1003; HEAD=TERMS; DATA=pairs)
            _tmp1003 = new(cls)
            _tmp1003.head = TERMS
            _tmp1003.data = pairs
            return _tmp1003
        else:
            #ADD_SYMBOL_SYMBOL(LHS=self; RHS=other)
            if self == other:
                pairs = {self: 2}
            else:
                pairs = {self: 1, other: 1}
            #RETURN_NEW(HEAD=TERMS; DATA=pairs)
            #NEWINSTANCE(OBJ=_tmp1024; HEAD=TERMS; DATA=pairs)
            _tmp1024 = new(cls)
            _tmp1024.head = TERMS
            _tmp1024.data = pairs
            return _tmp1024

def sub_method(self, other, NUMBER=NUMBER, TERMS=TERMS, FACTORS=FACTORS, new=object.__new__):
    cls = self.__class__
    lhead = self.head
    if type(other) is not cls:
        if isinstance(other, cls.coefftypes):
            if lhead is NUMBER:
                #SUB_NUMBER_VALUE(VALUE=other; LHS=self)
                #RETURN_NEW(HEAD=NUMBER; DATA=self.data - other)
                #NEWINSTANCE(OBJ=_tmp1045; HEAD=NUMBER; DATA=self.data - other)
                _tmp1045 = new(cls)
                _tmp1045.head = NUMBER
                _tmp1045.data = self.data - other
                return _tmp1045
            elif lhead is TERMS:
                #SUB_TERMS_VALUE(VALUE=other; LHS=self)
                #ADD_VALUE_TERMS(VALUE=-other; RHS=self)
                _tmp1066 = -other
                if not _tmp1066:
                    return self
                pairs = dict(self.data)
                #ADD_VALUE_DICT(DICT=pairs; VALUE=_tmp1066)
                #ADD_TERM_VALUE_DICT(TERM=cls.one; VALUE=_tmp1066; DICT=pairs; DICT_GET=pairs.get; SIGN=+; USIGN=)
                _tmp1080 = pairs.get(cls.one)
                if _tmp1080 is None:
                    pairs[cls.one] =  _tmp1066
                else:
                    _tmp1080 = _tmp1080 + _tmp1066
                    if _tmp1080:
                        pairs[cls.one] = _tmp1080
                    else:
                        del pairs[cls.one]
                #RETURN_NEW(HEAD=TERMS; DATA=pairs)
                #NEWINSTANCE(OBJ=_tmp1087; HEAD=TERMS; DATA=pairs)
                _tmp1087 = new(cls)
                _tmp1087.head = TERMS
                _tmp1087.data = pairs
                return _tmp1087
            else:
                #SUB_SYMBOL_VALUE(VALUE=other; LHS=self)
                #ADD_SYMBOL_VALUE(OBJ=obj; LHS=self; VALUE=-other)
                #ADD_VALUE_SYMBOL(VALUE=-other; RHS=self)
                _tmp1115 = -other
                if not _tmp1115:
                    return self
                #RETURN_NEW(HEAD=TERMS; DATA={cls.one: _tmp1115, self: 1})
                #NEWINSTANCE(OBJ=_tmp1122; HEAD=TERMS; DATA={cls.one: _tmp1115, self: 1})
                _tmp1122 = new(cls)
                _tmp1122.head = TERMS
                _tmp1122.data = {cls.one: _tmp1115, self: 1}
                return _tmp1122
        other = cls.convert(other, False)
        if other is NotImplemented:
            return other
    rhead = other.head
    if lhead is NUMBER:
        if rhead is NUMBER:
            #SUB_NUMBER_NUMBER(LHS=self; RHS=other)
            #SUB_VALUE_NUMBER(VALUE=self.data; RHS=other)
            #RETURN_NEW(HEAD=NUMBER; DATA=self.data - other.data)
            #NEWINSTANCE(OBJ=_tmp1150; HEAD=NUMBER; DATA=self.data - other.data)
            _tmp1150 = new(cls)
            _tmp1150.head = NUMBER
            _tmp1150.data = self.data - other.data
            return _tmp1150
        elif rhead is TERMS:
            #SUB_NUMBER_TERMS(LHS=self; RHS=other)
            #SUB_VALUE_TERMS(VALUE=self.data; RHS=other)
            _tmp1171 = self.data
            if not _tmp1171:
                #NEG_TERMS(OP=other)
                op_pairs = other.data
                if len(op_pairs)==1:
                    t, c = op_pairs.items()[0]
                    c = -c
                    if c==1:
                        return t
                    #RETURN_NEW(HEAD=TERMS; DATA={t:c})
                    #NEWINSTANCE(OBJ=_tmp1185; HEAD=TERMS; DATA={t:c})
                    _tmp1185 = new(cls)
                    _tmp1185.head = TERMS
                    _tmp1185.data = {t:c}
                    return _tmp1185
                #NEG_DICT_VALUES(DICT_IN=other.data; DICT_OUT=pairs)
                pairs = dict([(t, -c) for t,c in other.data.iteritems()])
                #RETURN_NEW(HEAD=TERMS; DATA=pairs)
                #NEWINSTANCE(OBJ=_tmp1206; HEAD=TERMS; DATA=pairs)
                _tmp1206 = new(cls)
                _tmp1206.head = TERMS
                _tmp1206.data = pairs
                return _tmp1206
            #NEG_DICT_VALUES(DICT_IN=other.data; DICT_OUT=pairs)
            pairs = dict([(t, -c) for t,c in other.data.iteritems()])
            #ADD_VALUE_DICT(DICT=pairs; VALUE=_tmp1171)
            #ADD_TERM_VALUE_DICT(TERM=cls.one; VALUE=_tmp1171; DICT=pairs; DICT_GET=pairs.get; SIGN=+; USIGN=)
            _tmp1234 = pairs.get(cls.one)
            if _tmp1234 is None:
                pairs[cls.one] =  _tmp1171
            else:
                _tmp1234 = _tmp1234 + _tmp1171
                if _tmp1234:
                    pairs[cls.one] = _tmp1234
                else:
                    del pairs[cls.one]
            #RETURN_NEW(HEAD=TERMS; DATA=pairs)
            #NEWINSTANCE(OBJ=_tmp1241; HEAD=TERMS; DATA=pairs)
            _tmp1241 = new(cls)
            _tmp1241.head = TERMS
            _tmp1241.data = pairs
            return _tmp1241
        else:
            #SUB_NUMBER_SYMBOL(LHS=self; RHS=other)
            #SUB_VALUE_SYMBOL(VALUE=self.data; RHS=other)
            _tmp1262 = self.data
            if not _tmp1262:
                #RETURN_NEW(HEAD=TERMS; DATA={other: -1})
                #NEWINSTANCE(OBJ=_tmp1269; HEAD=TERMS; DATA={other: -1})
                _tmp1269 = new(cls)
                _tmp1269.head = TERMS
                _tmp1269.data = {other: -1}
                return _tmp1269
            #RETURN_NEW(HEAD=TERMS; DATA={cls.one: _tmp1262, other: -1})
            #NEWINSTANCE(OBJ=_tmp1283; HEAD=TERMS; DATA={cls.one: _tmp1262, other: -1})
            _tmp1283 = new(cls)
            _tmp1283.head = TERMS
            _tmp1283.data = {cls.one: _tmp1262, other: -1}
            return _tmp1283
    elif lhead is TERMS:
        if rhead is NUMBER:
            #SUB_TERMS_NUMBER(LHS=self; RHS=other)
            #SUB_TERMS_VALUE(VALUE=other.data; LHS=self)
            #ADD_VALUE_TERMS(VALUE=-other.data; RHS=self)
            _tmp1311 = -other.data
            if not _tmp1311:
                return self
            pairs = dict(self.data)
            #ADD_VALUE_DICT(DICT=pairs; VALUE=_tmp1311)
            #ADD_TERM_VALUE_DICT(TERM=cls.one; VALUE=_tmp1311; DICT=pairs; DICT_GET=pairs.get; SIGN=+; USIGN=)
            _tmp1325 = pairs.get(cls.one)
            if _tmp1325 is None:
                pairs[cls.one] =  _tmp1311
            else:
                _tmp1325 = _tmp1325 + _tmp1311
                if _tmp1325:
                    pairs[cls.one] = _tmp1325
                else:
                    del pairs[cls.one]
            #RETURN_NEW(HEAD=TERMS; DATA=pairs)
            #NEWINSTANCE(OBJ=_tmp1332; HEAD=TERMS; DATA=pairs)
            _tmp1332 = new(cls)
            _tmp1332.head = TERMS
            _tmp1332.data = pairs
            return _tmp1332
        elif rhead is TERMS:
            #SUB_TERMS_TERMS(LHS=self; RHS=other)
            pairs = dict(self.data)
            pairs_get = pairs.get
            for t,c in other.data.iteritems():
                #ADD_TERM_VALUE_DICT(TERM=t; VALUE=-c; DICT=pairs; DICT_GET=pairs_get; SIGN=+; USIGN=)
                _tmp1353 = pairs_get(t)
                if _tmp1353 is None:
                    pairs[t] =  -c
                else:
                    _tmp1353 = _tmp1353 + -c
                    if _tmp1353:
                        pairs[t] = _tmp1353
                    else:
                        del pairs[t]
            #CANONIZE_TERMS_DICT(DICT=pairs)
            if not pairs:
                return cls.zero
            if len(pairs)==1:
               t, c = pairs.items()[0]
               if c==1:
                   return t
               if t==cls.one:
                   return cls.convert(c)
            #RETURN_NEW(HEAD=TERMS; DATA=pairs)
            #NEWINSTANCE(OBJ=_tmp1367; HEAD=TERMS; DATA=pairs)
            _tmp1367 = new(cls)
            _tmp1367.head = TERMS
            _tmp1367.data = pairs
            return _tmp1367
        else:
            #SUB_TERMS_SYMBOL(LHS=self; RHS=other)
            pairs = dict(self.data)
            #ADD_TERM_VALUE_DICT(TERM=other; VALUE=-1; DICT=pairs; DICT_GET=pairs.get; SIGN=+; USIGN=)
            _tmp1388 = pairs.get(other)
            if _tmp1388 is None:
                pairs[other] =  -1
            else:
                _tmp1388 = _tmp1388 + -1
                if _tmp1388:
                    pairs[other] = _tmp1388
                else:
                    del pairs[other]
            #CANONIZE_TERMS_DICT(DICT=pairs)
            if not pairs:
                return cls.zero
            if len(pairs)==1:
               t, c = pairs.items()[0]
               if c==1:
                   return t
               if t==cls.one:
                   return cls.convert(c)
            #RETURN_NEW(HEAD=TERMS; DATA=pairs)
            #NEWINSTANCE(OBJ=_tmp1402; HEAD=TERMS; DATA=pairs)
            _tmp1402 = new(cls)
            _tmp1402.head = TERMS
            _tmp1402.data = pairs
            return _tmp1402
    else:
        if rhead is NUMBER:
            #SUB_SYMBOL_NUMBER(LHS=self; RHS=other)
            #SUB_SYMBOL_VALUE(VALUE=other.data; LHS=self)
            #ADD_SYMBOL_VALUE(OBJ=obj; LHS=self; VALUE=-other.data)
            #ADD_VALUE_SYMBOL(VALUE=-other.data; RHS=self)
            _tmp1437 = -other.data
            if not _tmp1437:
                return self
            #RETURN_NEW(HEAD=TERMS; DATA={cls.one: _tmp1437, self: 1})
            #NEWINSTANCE(OBJ=_tmp1444; HEAD=TERMS; DATA={cls.one: _tmp1437, self: 1})
            _tmp1444 = new(cls)
            _tmp1444.head = TERMS
            _tmp1444.data = {cls.one: _tmp1437, self: 1}
            return _tmp1444
        elif rhead is TERMS:
            #SUB_SYMBOL_TERMS(LHS=self; RHS=other)
            #NEG_DICT_VALUES(DICT_IN=other.data; DICT_OUT=pairs)
            pairs = dict([(t, -c) for t,c in other.data.iteritems()])
            #ADD_TERM_VALUE_DICT(TERM=self; VALUE=1; DICT=pairs; DICT_GET=pairs.get; SIGN=+; USIGN=)
            _tmp1472 = pairs.get(self)
            if _tmp1472 is None:
                pairs[self] =  1
            else:
                _tmp1472 = _tmp1472 + 1
                if _tmp1472:
                    pairs[self] = _tmp1472
                else:
                    del pairs[self]
            #CANONIZE_TERMS_DICT(DICT=pairs)
            if not pairs:
                return cls.zero
            if len(pairs)==1:
               t, c = pairs.items()[0]
               if c==1:
                   return t
               if t==cls.one:
                   return cls.convert(c)
            #RETURN_NEW(HEAD=TERMS; DATA=pairs)
            #NEWINSTANCE(OBJ=_tmp1486; HEAD=TERMS; DATA=pairs)
            _tmp1486 = new(cls)
            _tmp1486.head = TERMS
            _tmp1486.data = pairs
            return _tmp1486
        else:
            #SUB_SYMBOL_SYMBOL(LHS=self; RHS=other)
            if self == other:
                return cls.zero
            #RETURN_NEW(HEAD=TERMS; DATA={self: 1, other: -1})
            #NEWINSTANCE(OBJ=_tmp1507; HEAD=TERMS; DATA={self: 1, other: -1})
            _tmp1507 = new(cls)
            _tmp1507.head = TERMS
            _tmp1507.data = {self: 1, other: -1}
            return _tmp1507

def mul_method(self, other, NUMBER=NUMBER, TERMS=TERMS, FACTORS=FACTORS, new=object.__new__):
    cls = self.__class__
    lhead = self.head
    if type(other) is not cls:
        if isinstance(other, cls.coefftypes):
            if lhead is NUMBER:
                #MUL_NUMBER_VALUE(VALUE=other; LHS=self)
                #RETURN_NEW(HEAD=NUMBER; DATA=self.data * other)
                #NEWINSTANCE(OBJ=_tmp1528; HEAD=NUMBER; DATA=self.data * other)
                _tmp1528 = new(cls)
                _tmp1528.head = NUMBER
                _tmp1528.data = self.data * other
                return _tmp1528
            elif lhead is TERMS:
                #MUL_TERMS_VALUE(VALUE=other; LHS=self)
                #MUL_VALUE_TERMS(VALUE=other; RHS=self)
                _tmp1549 = other
                if not _tmp1549:
                    return cls.zero
                pairs = self.data
                if len(pairs)==1:
                    t, c = pairs.items()[0]
                    c = _tmp1549 * c
                    if c==1:
                        return t
                    #RETURN_NEW(HEAD=TERMS; DATA={t: c})
                    #NEWINSTANCE(OBJ=_tmp1556; HEAD=TERMS; DATA={t: c})
                    _tmp1556 = new(cls)
                    _tmp1556.head = TERMS
                    _tmp1556.data = {t: c}
                    return _tmp1556
                if _tmp1549==1:
                    return self
                pairs = {}
                for t,c in self.data.iteritems():
                    pairs[t] = _tmp1549 * c
                #NEWINSTANCE(OBJ=obj;HEAD=TERMS; DATA=pairs)
                obj = new(cls)
                obj.head = TERMS
                obj.data = pairs
                coeff, terms = self._coeff_terms
                if terms is not None:
                    c = coeff * _tmp1549
                    if not c==1:
                        obj._coeff_terms = (c, terms)
                else:
                    obj._coeff_terms = (_tmp1549, self)
                return obj
            elif lhead is FACTORS:
                #MUL_FACTORS_VALUE(VALUE=other; LHS=self)
                #MUL_SYMBOL_VALUE(VALUE=other; LHS=self)
                #MUL_VALUE_SYMBOL(VALUE=other; RHS=self)
                _tmp1591 = other
                if not _tmp1591:
                    return cls.zero
                if _tmp1591==1:
                    return self
                #RETURN_NEW(HEAD=TERMS; DATA={self: _tmp1591})
                #NEWINSTANCE(OBJ=_tmp1598; HEAD=TERMS; DATA={self: _tmp1591})
                _tmp1598 = new(cls)
                _tmp1598.head = TERMS
                _tmp1598.data = {self: _tmp1591}
                return _tmp1598
            else:
                #MUL_SYMBOL_VALUE(VALUE=other; LHS=self)
                #MUL_VALUE_SYMBOL(VALUE=other; RHS=self)
                _tmp1619 = other
                if not _tmp1619:
                    return cls.zero
                if _tmp1619==1:
                    return self
                #RETURN_NEW(HEAD=TERMS; DATA={self: _tmp1619})
                #NEWINSTANCE(OBJ=_tmp1626; HEAD=TERMS; DATA={self: _tmp1619})
                _tmp1626 = new(cls)
                _tmp1626.head = TERMS
                _tmp1626.data = {self: _tmp1619}
                return _tmp1626
        other = cls.convert(other, False)
        if other is NotImplemented:
            return other
    rhead = other.head
    if lhead is NUMBER:
        if rhead is NUMBER:
            #MUL_NUMBER_NUMBER(LHS=self; RHS=other)
            #MUL_VALUE_NUMBER(VALUE=self.data; RHS=other)
            #RETURN_NEW(HEAD=NUMBER; DATA=self.data * other.data)
            #NEWINSTANCE(OBJ=_tmp1654; HEAD=NUMBER; DATA=self.data * other.data)
            _tmp1654 = new(cls)
            _tmp1654.head = NUMBER
            _tmp1654.data = self.data * other.data
            return _tmp1654
        elif rhead is TERMS:
            #MUL_NUMBER_TERMS(LHS=self; RHS=other)
            #MUL_VALUE_TERMS(VALUE=self.data; RHS=other)
            _tmp1675 = self.data
            if not _tmp1675:
                return cls.zero
            pairs = other.data
            if len(pairs)==1:
                t, c = pairs.items()[0]
                c = _tmp1675 * c
                if c==1:
                    return t
                #RETURN_NEW(HEAD=TERMS; DATA={t: c})
                #NEWINSTANCE(OBJ=_tmp1682; HEAD=TERMS; DATA={t: c})
                _tmp1682 = new(cls)
                _tmp1682.head = TERMS
                _tmp1682.data = {t: c}
                return _tmp1682
            if _tmp1675==1:
                return other
            pairs = {}
            for t,c in other.data.iteritems():
                pairs[t] = _tmp1675 * c
            #NEWINSTANCE(OBJ=obj;HEAD=TERMS; DATA=pairs)
            obj = new(cls)
            obj.head = TERMS
            obj.data = pairs
            coeff, terms = other._coeff_terms
            if terms is not None:
                c = coeff * _tmp1675
                if not c==1:
                    obj._coeff_terms = (c, terms)
            else:
                obj._coeff_terms = (_tmp1675, other)
            return obj
        elif rhead is FACTORS:
            #MUL_NUMBER_FACTORS(LHS=self; RHS=other)
            #MUL_SYMBOL_VALUE(VALUE=self.data; LHS=other)
            #MUL_VALUE_SYMBOL(VALUE=self.data; RHS=other)
            _tmp1717 = self.data
            if not _tmp1717:
                return cls.zero
            if _tmp1717==1:
                return other
            #RETURN_NEW(HEAD=TERMS; DATA={other: _tmp1717})
            #NEWINSTANCE(OBJ=_tmp1724; HEAD=TERMS; DATA={other: _tmp1717})
            _tmp1724 = new(cls)
            _tmp1724.head = TERMS
            _tmp1724.data = {other: _tmp1717}
            return _tmp1724
        else:
            #MUL_NUMBER_SYMBOL(LHS=self; RHS=other)
            #MUL_VALUE_SYMBOL(VALUE=self.data; RHS=other)
            _tmp1745 = self.data
            if not _tmp1745:
                return cls.zero
            if _tmp1745==1:
                return other
            #RETURN_NEW(HEAD=TERMS; DATA={other: _tmp1745})
            #NEWINSTANCE(OBJ=_tmp1752; HEAD=TERMS; DATA={other: _tmp1745})
            _tmp1752 = new(cls)
            _tmp1752.head = TERMS
            _tmp1752.data = {other: _tmp1745}
            return _tmp1752
    elif lhead is TERMS:
        if rhead is NUMBER:
            #MUL_TERMS_NUMBER(LHS=self; RHS=other)
            #MUL_TERMS_VALUE(VALUE=other.data; LHS=self)
            #MUL_VALUE_TERMS(VALUE=other.data; RHS=self)
            _tmp1780 = other.data
            if not _tmp1780:
                return cls.zero
            pairs = self.data
            if len(pairs)==1:
                t, c = pairs.items()[0]
                c = _tmp1780 * c
                if c==1:
                    return t
                #RETURN_NEW(HEAD=TERMS; DATA={t: c})
                #NEWINSTANCE(OBJ=_tmp1787; HEAD=TERMS; DATA={t: c})
                _tmp1787 = new(cls)
                _tmp1787.head = TERMS
                _tmp1787.data = {t: c}
                return _tmp1787
            if _tmp1780==1:
                return self
            pairs = {}
            for t,c in self.data.iteritems():
                pairs[t] = _tmp1780 * c
            #NEWINSTANCE(OBJ=obj;HEAD=TERMS; DATA=pairs)
            obj = new(cls)
            obj.head = TERMS
            obj.data = pairs
            coeff, terms = self._coeff_terms
            if terms is not None:
                c = coeff * _tmp1780
                if not c==1:
                    obj._coeff_terms = (c, terms)
            else:
                obj._coeff_terms = (_tmp1780, self)
            return obj
        elif rhead is TERMS:
            #MUL_TERMS_TERMS(LHS=self; RHS=other)
            lpairs = self.data
            rpairs = other.data
            if len(lpairs)==1:
                t1,c1 = lpairs.items()[0]
                if len(rpairs)==1:
                    t2,c2 = rpairs.items()[0]
                    t = t1 * t2
                    c = c1 * c2
                    if t == cls.one:
                        return cls.convert(c)
                    if c==1:
                        return t
                    #RETURN_NEW(HEAD=TERMS; DATA={t: c})
                    #NEWINSTANCE(OBJ=_tmp1815; HEAD=TERMS; DATA={t: c})
                    _tmp1815 = new(cls)
                    _tmp1815.head = TERMS
                    _tmp1815.data = {t: c}
                    return _tmp1815
                coeff, terms = other._coeff_terms
                if terms is None:
                    return (t1 * other) * c1
                return (t1*terms) * (c1*coeff)
            elif len(rpairs)==1:
                t1,c1 = rpairs.items()[0]
                coeff, terms = other._coeff_terms
                if terms is None:
                    return (t1 * self) * c1
                return (t1*terms) * (c1*coeff)
            lcoeff, lterms = self._coeff_terms
            rcoeff, rterms = other._coeff_terms
            if lterms is None:
                lterms = self
            if rterms is None:
                rterms = other
            if lterms==rterms:
                #NEWINSTANCE(OBJ=_tmp1808; HEAD=FACTORS; DATA={lterms: 2})
                _tmp1808 = new(cls)
                _tmp1808.head = FACTORS
                _tmp1808.data = {lterms: 2}
            else:
                #NEWINSTANCE(OBJ=_tmp1808; HEAD=FACTORS; DATA={lterms: 1, rterms: 1})
                _tmp1808 = new(cls)
                _tmp1808.head = FACTORS
                _tmp1808.data = {lterms: 1, rterms: 1}
            c = lcoeff * rcoeff
            if c==1:
                return _tmp1808
            #RETURN_NEW(HEAD=TERMS; DATA={_tmp1808: c})
            #NEWINSTANCE(OBJ=_tmp1843; HEAD=TERMS; DATA={_tmp1808: c})
            _tmp1843 = new(cls)
            _tmp1843.head = TERMS
            _tmp1843.data = {_tmp1808: c}
            return _tmp1843
        elif rhead is FACTORS:
            #MUL_TERMS_FACTORS(LHS=self; RHS=other)
            #MUL_FACTORS_TERMS(LHS=other; RHS=self)
            rpairs = self.data
            if len(rpairs)==1:
                t1,c1 = rpairs.items()[0]
                t = t1 * other
                #RETURN_NEW(HEAD=TERMS; DATA={t: c1})
                #NEWINSTANCE(OBJ=_tmp1871; HEAD=TERMS; DATA={t: c1})
                _tmp1871 = new(cls)
                _tmp1871.head = TERMS
                _tmp1871.data = {t: c1}
                return _tmp1871
            coeff, terms = self._coeff_terms
            if terms is None:
                #MUL_FACTORS_SYMBOL(LHS=other; RHS=self)
                pairs = dict(other.data)
                #MUL_DICT_SYMBOL(DICT=pairs; RHS=self)
                #ADD_TERM_VALUE_DICT(TERM=self; VALUE=1; DICT=pairs; DICT_GET=pairs.get; SIGN=+; USIGN=)
                _tmp1899 = pairs.get(self)
                if _tmp1899 is None:
                    pairs[self] =  1
                else:
                    _tmp1899 = _tmp1899 + 1
                    if _tmp1899:
                        pairs[self] = _tmp1899
                    else:
                        del pairs[self]
                #CANONIZE_FACTORS_DICT1(DICT=pairs)
                if not pairs:
                    return cls.one
                if len(pairs)==1:
                   t, c = pairs.items()[0]
                   if c==1:
                       return t
                   if t==cls.one:
                       return t
                #RETURN_NEW(HEAD=FACTORS; DATA=pairs)
                #NEWINSTANCE(OBJ=_tmp1913; HEAD=FACTORS; DATA=pairs)
                _tmp1913 = new(cls)
                _tmp1913.head = FACTORS
                _tmp1913.data = pairs
                return _tmp1913
            pairs = dict(other.data)
            #ADD_TERM_VALUE_DICT(TERM=terms; VALUE=1; DICT=pairs; DICT_GET=pairs.get; SIGN=+; USIGN=)
            _tmp1927 = pairs.get(terms)
            if _tmp1927 is None:
                pairs[terms] =  1
            else:
                _tmp1927 = _tmp1927 + 1
                if _tmp1927:
                    pairs[terms] = _tmp1927
                else:
                    del pairs[terms]
            #CANONIZE_FACTORS_DICT(DICT=pairs; NUMBER=coeff)
            if not pairs:
                if coeff is 1:
                    return cls.one
                return coeff
            if len(pairs)==1:
               t, c = pairs.items()[0]
               if c==1:
                   if coeff==1:
                       return t
                   #RETURN_NEW(HEAD=TERMS; DATA={t: coeff})
                   #NEWINSTANCE(OBJ=_tmp1941; HEAD=TERMS; DATA={t: coeff})
                   _tmp1941 = new(cls)
                   _tmp1941.head = TERMS
                   _tmp1941.data = {t: coeff}
                   return _tmp1941
               if t==cls.one:
                   return coeff
            #NEWINSTANCE(OBJ=_tmp1864; HEAD=FACTORS; DATA=pairs)
            _tmp1864 = new(cls)
            _tmp1864.head = FACTORS
            _tmp1864.data = pairs
            #RETURN_NEW(HEAD=TERMS; DATA={_tmp1864: coeff})
            #NEWINSTANCE(OBJ=_tmp1962; HEAD=TERMS; DATA={_tmp1864: coeff})
            _tmp1962 = new(cls)
            _tmp1962.head = TERMS
            _tmp1962.data = {_tmp1864: coeff}
            return _tmp1962
        else:
            #MUL_TERMS_SYMBOL(LHS=self; RHS=other)
            pairs = self.data
            if len(pairs)==1:
                t,c = pairs.items()[0]
                t = t * other
                if t==cls.one:
                    return cls.convert(c)
                #RETURN_NEW(HEAD=TERMS; DATA={t: c})
                #NEWINSTANCE(OBJ=_tmp1983; HEAD=TERMS; DATA={t: c})
                _tmp1983 = new(cls)
                _tmp1983.head = TERMS
                _tmp1983.data = {t: c}
                return _tmp1983
            coeff, terms = self._coeff_terms
            if terms is not None:
                #NEWINSTANCE(OBJ=_tmp1976; HEAD=FACTORS; DATA={terms:1, other:1})
                _tmp1976 = new(cls)
                _tmp1976.head = FACTORS
                _tmp1976.data = {terms:1, other:1}
                #RETURN_NEW(HEAD=TERMS; DATA={_tmp1976:coeff})
                #NEWINSTANCE(OBJ=_tmp2004; HEAD=TERMS; DATA={_tmp1976:coeff})
                _tmp2004 = new(cls)
                _tmp2004.head = TERMS
                _tmp2004.data = {_tmp1976:coeff}
                return _tmp2004
            #RETURN_NEW(HEAD=FACTORS; DATA={self: 1, other: 1})
            #NEWINSTANCE(OBJ=_tmp2018; HEAD=FACTORS; DATA={self: 1, other: 1})
            _tmp2018 = new(cls)
            _tmp2018.head = FACTORS
            _tmp2018.data = {self: 1, other: 1}
            return _tmp2018
    elif lhead is FACTORS:
        if rhead is NUMBER:
            #MUL_FACTORS_NUMBER(LHS=self; RHS=other)
            #MUL_SYMBOL_VALUE(VALUE=other.data; LHS=self)
            #MUL_VALUE_SYMBOL(VALUE=other.data; RHS=self)
            _tmp2046 = other.data
            if not _tmp2046:
                return cls.zero
            if _tmp2046==1:
                return self
            #RETURN_NEW(HEAD=TERMS; DATA={self: _tmp2046})
            #NEWINSTANCE(OBJ=_tmp2053; HEAD=TERMS; DATA={self: _tmp2046})
            _tmp2053 = new(cls)
            _tmp2053.head = TERMS
            _tmp2053.data = {self: _tmp2046}
            return _tmp2053
        elif rhead is TERMS:
            #MUL_FACTORS_TERMS(LHS=self; RHS=other)
            rpairs = other.data
            if len(rpairs)==1:
                t1,c1 = rpairs.items()[0]
                t = t1 * self
                #RETURN_NEW(HEAD=TERMS; DATA={t: c1})
                #NEWINSTANCE(OBJ=_tmp2074; HEAD=TERMS; DATA={t: c1})
                _tmp2074 = new(cls)
                _tmp2074.head = TERMS
                _tmp2074.data = {t: c1}
                return _tmp2074
            coeff, terms = other._coeff_terms
            if terms is None:
                #MUL_FACTORS_SYMBOL(LHS=self; RHS=other)
                pairs = dict(self.data)
                #MUL_DICT_SYMBOL(DICT=pairs; RHS=other)
                #ADD_TERM_VALUE_DICT(TERM=other; VALUE=1; DICT=pairs; DICT_GET=pairs.get; SIGN=+; USIGN=)
                _tmp2102 = pairs.get(other)
                if _tmp2102 is None:
                    pairs[other] =  1
                else:
                    _tmp2102 = _tmp2102 + 1
                    if _tmp2102:
                        pairs[other] = _tmp2102
                    else:
                        del pairs[other]
                #CANONIZE_FACTORS_DICT1(DICT=pairs)
                if not pairs:
                    return cls.one
                if len(pairs)==1:
                   t, c = pairs.items()[0]
                   if c==1:
                       return t
                   if t==cls.one:
                       return t
                #RETURN_NEW(HEAD=FACTORS; DATA=pairs)
                #NEWINSTANCE(OBJ=_tmp2116; HEAD=FACTORS; DATA=pairs)
                _tmp2116 = new(cls)
                _tmp2116.head = FACTORS
                _tmp2116.data = pairs
                return _tmp2116
            pairs = dict(self.data)
            #ADD_TERM_VALUE_DICT(TERM=terms; VALUE=1; DICT=pairs; DICT_GET=pairs.get; SIGN=+; USIGN=)
            _tmp2130 = pairs.get(terms)
            if _tmp2130 is None:
                pairs[terms] =  1
            else:
                _tmp2130 = _tmp2130 + 1
                if _tmp2130:
                    pairs[terms] = _tmp2130
                else:
                    del pairs[terms]
            #CANONIZE_FACTORS_DICT(DICT=pairs; NUMBER=coeff)
            if not pairs:
                if coeff is 1:
                    return cls.one
                return coeff
            if len(pairs)==1:
               t, c = pairs.items()[0]
               if c==1:
                   if coeff==1:
                       return t
                   #RETURN_NEW(HEAD=TERMS; DATA={t: coeff})
                   #NEWINSTANCE(OBJ=_tmp2144; HEAD=TERMS; DATA={t: coeff})
                   _tmp2144 = new(cls)
                   _tmp2144.head = TERMS
                   _tmp2144.data = {t: coeff}
                   return _tmp2144
               if t==cls.one:
                   return coeff
            #NEWINSTANCE(OBJ=_tmp2067; HEAD=FACTORS; DATA=pairs)
            _tmp2067 = new(cls)
            _tmp2067.head = FACTORS
            _tmp2067.data = pairs
            #RETURN_NEW(HEAD=TERMS; DATA={_tmp2067: coeff})
            #NEWINSTANCE(OBJ=_tmp2165; HEAD=TERMS; DATA={_tmp2067: coeff})
            _tmp2165 = new(cls)
            _tmp2165.head = TERMS
            _tmp2165.data = {_tmp2067: coeff}
            return _tmp2165
        elif rhead is FACTORS:
            #MUL_FACTORS_FACTORS(LHS=self; RHS=other)
            pairs = dict(self.data)
            pairs_get = pairs.get
            number = 1
            for t,c in other.data.iteritems():
                #MUL_FACTOR_VALUE_DICT(FACTOR=t; SIGN=+; USIGN=; VALUE=c; DICT=pairs; DICT_GET=pairs_get; NUMBER=number)
                _tmp2186 = pairs_get(t)
                if _tmp2186 is None:
                    pairs[t] =  c
                else:
                    _tmp2186 = _tmp2186 + c
                    if type(_tmp2186) is cls and _tmp2186.head is NUMBER:
                        _tmp2186 = _tmp2186.data
                    if _tmp2186:
                        if t.head is NUMBER:
                            del pairs[t]
                            z, sym = try_power(t.data, _tmp2186)
                            if sym:
                                for t1, c1 in sym:
                                    #NEWINSTANCE(OBJ=tt; HEAD=NUMBER; DATA=t1)
                                    tt = new(cls)
                                    tt.head = NUMBER
                                    tt.data = t1
                                    #ADD_TERM_VALUE_DICT(DICT=pairs; DICT_GET=pairs_get; TERM=tt; VALUE=c1; SIGN=+; USIGN=)
                                    _tmp2200 = pairs_get(tt)
                                    if _tmp2200 is None:
                                        pairs[tt] =  c1
                                    else:
                                        _tmp2200 = _tmp2200 + c1
                                        if _tmp2200:
                                            pairs[tt] = _tmp2200
                                        else:
                                            del pairs[tt]
                            number = number * z
                        else:
                            pairs[t] = _tmp2186
                    else:
                        del pairs[t]
            #CANONIZE_FACTORS_DICT(DICT=pairs; NUMBER=number)
            if not pairs:
                if number is 1:
                    return cls.one
                return number
            if len(pairs)==1:
               t, c = pairs.items()[0]
               if c==1:
                   if number==1:
                       return t
                   #RETURN_NEW(HEAD=TERMS; DATA={t: number})
                   #NEWINSTANCE(OBJ=_tmp2214; HEAD=TERMS; DATA={t: number})
                   _tmp2214 = new(cls)
                   _tmp2214.head = TERMS
                   _tmp2214.data = {t: number}
                   return _tmp2214
               if t==cls.one:
                   return number
            if number == 1:
                #RETURN_NEW(HEAD=FACTORS; DATA=pairs)
                #NEWINSTANCE(OBJ=_tmp2228; HEAD=FACTORS; DATA=pairs)
                _tmp2228 = new(cls)
                _tmp2228.head = FACTORS
                _tmp2228.data = pairs
                return _tmp2228
            #NEWINSTANCE(OBJ=obj; HEAD=FACTORS; DATA=pairs)
            obj = new(cls)
            obj.head = FACTORS
            obj.data = pairs
            #RETURN_NEW(HEAD=TERMS; DATA={obj: number})
            #NEWINSTANCE(OBJ=_tmp2249; HEAD=TERMS; DATA={obj: number})
            _tmp2249 = new(cls)
            _tmp2249.head = TERMS
            _tmp2249.data = {obj: number}
            return _tmp2249
        else:
            #MUL_FACTORS_SYMBOL(LHS=self; RHS=other)
            pairs = dict(self.data)
            #MUL_DICT_SYMBOL(DICT=pairs; RHS=other)
            #ADD_TERM_VALUE_DICT(TERM=other; VALUE=1; DICT=pairs; DICT_GET=pairs.get; SIGN=+; USIGN=)
            _tmp2277 = pairs.get(other)
            if _tmp2277 is None:
                pairs[other] =  1
            else:
                _tmp2277 = _tmp2277 + 1
                if _tmp2277:
                    pairs[other] = _tmp2277
                else:
                    del pairs[other]
            #CANONIZE_FACTORS_DICT1(DICT=pairs)
            if not pairs:
                return cls.one
            if len(pairs)==1:
               t, c = pairs.items()[0]
               if c==1:
                   return t
               if t==cls.one:
                   return t
            #RETURN_NEW(HEAD=FACTORS; DATA=pairs)
            #NEWINSTANCE(OBJ=_tmp2291; HEAD=FACTORS; DATA=pairs)
            _tmp2291 = new(cls)
            _tmp2291.head = FACTORS
            _tmp2291.data = pairs
            return _tmp2291
    else:
        if rhead is NUMBER:
            #MUL_SYMBOL_NUMBER(LHS=self; RHS=other)
            #MUL_SYMBOL_VALUE(VALUE=other.data; LHS=self)
            #MUL_VALUE_SYMBOL(VALUE=other.data; RHS=self)
            _tmp2319 = other.data
            if not _tmp2319:
                return cls.zero
            if _tmp2319==1:
                return self
            #RETURN_NEW(HEAD=TERMS; DATA={self: _tmp2319})
            #NEWINSTANCE(OBJ=_tmp2326; HEAD=TERMS; DATA={self: _tmp2319})
            _tmp2326 = new(cls)
            _tmp2326.head = TERMS
            _tmp2326.data = {self: _tmp2319}
            return _tmp2326
        elif rhead is TERMS:
            #MUL_SYMBOL_TERMS(LHS=self; RHS=other)
            #MUL_TERMS_SYMBOL(LHS=other; RHS=self)
            pairs = other.data
            if len(pairs)==1:
                t,c = pairs.items()[0]
                t = t * self
                if t==cls.one:
                    return cls.convert(c)
                #RETURN_NEW(HEAD=TERMS; DATA={t: c})
                #NEWINSTANCE(OBJ=_tmp2354; HEAD=TERMS; DATA={t: c})
                _tmp2354 = new(cls)
                _tmp2354.head = TERMS
                _tmp2354.data = {t: c}
                return _tmp2354
            coeff, terms = other._coeff_terms
            if terms is not None:
                #NEWINSTANCE(OBJ=_tmp2347; HEAD=FACTORS; DATA={terms:1, self:1})
                _tmp2347 = new(cls)
                _tmp2347.head = FACTORS
                _tmp2347.data = {terms:1, self:1}
                #RETURN_NEW(HEAD=TERMS; DATA={_tmp2347:coeff})
                #NEWINSTANCE(OBJ=_tmp2375; HEAD=TERMS; DATA={_tmp2347:coeff})
                _tmp2375 = new(cls)
                _tmp2375.head = TERMS
                _tmp2375.data = {_tmp2347:coeff}
                return _tmp2375
            #RETURN_NEW(HEAD=FACTORS; DATA={other: 1, self: 1})
            #NEWINSTANCE(OBJ=_tmp2389; HEAD=FACTORS; DATA={other: 1, self: 1})
            _tmp2389 = new(cls)
            _tmp2389.head = FACTORS
            _tmp2389.data = {other: 1, self: 1}
            return _tmp2389
        elif rhead is FACTORS:
            #MUL_SYMBOL_FACTORS(LHS=self; RHS=other)
            #MUL_FACTORS_SYMBOL(LHS=other; RHS=self)
            pairs = dict(other.data)
            #MUL_DICT_SYMBOL(DICT=pairs; RHS=self)
            #ADD_TERM_VALUE_DICT(TERM=self; VALUE=1; DICT=pairs; DICT_GET=pairs.get; SIGN=+; USIGN=)
            _tmp2424 = pairs.get(self)
            if _tmp2424 is None:
                pairs[self] =  1
            else:
                _tmp2424 = _tmp2424 + 1
                if _tmp2424:
                    pairs[self] = _tmp2424
                else:
                    del pairs[self]
            #CANONIZE_FACTORS_DICT1(DICT=pairs)
            if not pairs:
                return cls.one
            if len(pairs)==1:
               t, c = pairs.items()[0]
               if c==1:
                   return t
               if t==cls.one:
                   return t
            #RETURN_NEW(HEAD=FACTORS; DATA=pairs)
            #NEWINSTANCE(OBJ=_tmp2438; HEAD=FACTORS; DATA=pairs)
            _tmp2438 = new(cls)
            _tmp2438.head = FACTORS
            _tmp2438.data = pairs
            return _tmp2438
        else:
            #MUL_SYMBOL_SYMBOL(LHS=self; RHS=other)
            if self == other:
                pairs = {self: 2}
            else:
                pairs = {self: 1, other: 1}
            #RETURN_NEW(HEAD=FACTORS; DATA=pairs)
            #NEWINSTANCE(OBJ=_tmp2459; HEAD=FACTORS; DATA=pairs)
            _tmp2459 = new(cls)
            _tmp2459.head = FACTORS
            _tmp2459.data = pairs
            return _tmp2459

def div_method(self, other, NUMBER=NUMBER, TERMS=TERMS, FACTORS=FACTORS, new=object.__new__):
    cls = self.__class__
    lhead = self.head
    if type(other) is not cls:
        if isinstance(other, cls.coefftypes):
            if lhead is NUMBER:
                #DIV_NUMBER_VALUE(VALUE=other; LHS=self)
                #RETURN_NEW2(HEAD=NUMBER; DATA=div(self.data, other, cls))
                _tmp2480 = div(self.data, other, cls)
                if isinstance(_tmp2480, Infinity):
                    return _tmp2480
                #RETURN_NEW(HEAD=NUMBER; DATA=_tmp2480)
                #NEWINSTANCE(OBJ=_tmp2487; HEAD=NUMBER; DATA=_tmp2480)
                _tmp2487 = new(cls)
                _tmp2487.head = NUMBER
                _tmp2487.data = _tmp2480
                return _tmp2487
            elif lhead is TERMS:
                #DIV_TERMS_VALUE(VALUE=other; LHS=self)
                #MUL_TERMS_VALUE(LHS=self; VALUE=div(1,other,cls))
                #MUL_VALUE_TERMS(VALUE=div(1,other,cls); RHS=self)
                _tmp2515 = div(1,other,cls)
                if not _tmp2515:
                    return cls.zero
                pairs = self.data
                if len(pairs)==1:
                    t, c = pairs.items()[0]
                    c = _tmp2515 * c
                    if c==1:
                        return t
                    #RETURN_NEW(HEAD=TERMS; DATA={t: c})
                    #NEWINSTANCE(OBJ=_tmp2522; HEAD=TERMS; DATA={t: c})
                    _tmp2522 = new(cls)
                    _tmp2522.head = TERMS
                    _tmp2522.data = {t: c}
                    return _tmp2522
                if _tmp2515==1:
                    return self
                pairs = {}
                for t,c in self.data.iteritems():
                    pairs[t] = _tmp2515 * c
                #NEWINSTANCE(OBJ=obj;HEAD=TERMS; DATA=pairs)
                obj = new(cls)
                obj.head = TERMS
                obj.data = pairs
                coeff, terms = self._coeff_terms
                if terms is not None:
                    c = coeff * _tmp2515
                    if not c==1:
                        obj._coeff_terms = (c, terms)
                else:
                    obj._coeff_terms = (_tmp2515, self)
                return obj
            elif lhead is FACTORS:
                #DIV_FACTORS_VALUE(VALUE=other; LHS=self)
                #MUL_FACTORS_VALUE(LHS=self; VALUE=div(1,other,cls))
                #MUL_SYMBOL_VALUE(VALUE=div(1,other,cls); LHS=self)
                #MUL_VALUE_SYMBOL(VALUE=div(1,other,cls); RHS=self)
                _tmp2564 = div(1,other,cls)
                if not _tmp2564:
                    return cls.zero
                if _tmp2564==1:
                    return self
                #RETURN_NEW(HEAD=TERMS; DATA={self: _tmp2564})
                #NEWINSTANCE(OBJ=_tmp2571; HEAD=TERMS; DATA={self: _tmp2564})
                _tmp2571 = new(cls)
                _tmp2571.head = TERMS
                _tmp2571.data = {self: _tmp2564}
                return _tmp2571
            else:
                #DIV_SYMBOL_VALUE(VALUE=other; LHS=self)
                #MUL_VALUE_SYMBOL(VALUE=div(1, other, cls); RHS=self)
                _tmp2592 = div(1, other, cls)
                if not _tmp2592:
                    return cls.zero
                if _tmp2592==1:
                    return self
                #RETURN_NEW(HEAD=TERMS; DATA={self: _tmp2592})
                #NEWINSTANCE(OBJ=_tmp2599; HEAD=TERMS; DATA={self: _tmp2592})
                _tmp2599 = new(cls)
                _tmp2599.head = TERMS
                _tmp2599.data = {self: _tmp2592}
                return _tmp2599
        other = cls.convert(other, False)
        if other is NotImplemented:
            return other
    rhead = other.head
    if lhead is NUMBER:
        if rhead is NUMBER:
            #DIV_NUMBER_NUMBER(LHS=self; RHS=other)
            #DIV_VALUE_NUMBER(VALUE=self.data; RHS=other)
            #RETURN_NEW2(HEAD=NUMBER; DATA=div(self.data, other.data, cls))
            _tmp2627 = div(self.data, other.data, cls)
            if isinstance(_tmp2627, Infinity):
                return _tmp2627
            #RETURN_NEW(HEAD=NUMBER; DATA=_tmp2627)
            #NEWINSTANCE(OBJ=_tmp2634; HEAD=NUMBER; DATA=_tmp2627)
            _tmp2634 = new(cls)
            _tmp2634.head = NUMBER
            _tmp2634.data = _tmp2627
            return _tmp2634
        elif rhead is TERMS:
            #DIV_NUMBER_TERMS(LHS=self; RHS=other)
            #DIV_VALUE_TERMS(VALUE=self.data; RHS=other)
            _tmp2655 = self.data
            if not _tmp2655:
                return cls.zero
            pairs = other.data
            if len(pairs)==1:
                t, c = pairs.items()[0]
                c = div(self.data, c, cls)
                t = 1/t
                if c==1:
                    return t
                if t==cls.one:
                    return cls.convert(c)
                #RETURN_NEW(HEAD=TERMS; DATA={t: c})
                #NEWINSTANCE(OBJ=_tmp2662; HEAD=TERMS; DATA={t: c})
                _tmp2662 = new(cls)
                _tmp2662.head = TERMS
                _tmp2662.data = {t: c}
                return _tmp2662
            #NEWINSTANCE(OBJ=_tmp2655; HEAD=FACTORS; DATA={other: -1})
            _tmp2655 = new(cls)
            _tmp2655.head = FACTORS
            _tmp2655.data = {other: -1}
            if self.data==1:
                return _tmp2655
            #RETURN_NEW(HEAD=TERMS; DATA={_tmp2655: self.data})
            #NEWINSTANCE(OBJ=_tmp2683; HEAD=TERMS; DATA={_tmp2655: self.data})
            _tmp2683 = new(cls)
            _tmp2683.head = TERMS
            _tmp2683.data = {_tmp2655: self.data}
            return _tmp2683
        elif rhead is FACTORS:
            #DIV_NUMBER_FACTORS(LHS=self; RHS=other)
            #DIV_VALUE_FACTORS(VALUE=self.data; RHS=other)
            
            pairs = other.data
            if len(pairs)==1:
                t, c = pairs.items()[0]
                c = -c
                if c==1:
                    return t * self.data
                new_pairs = {t: c}
            else:
                #NEG_DICT_VALUES(DICT_IN=pairs; DICT_OUT=new_pairs)
                new_pairs = dict([(t, -c) for t,c in pairs.iteritems()])
            #NEWINSTANCE(OBJ=_tmp2704; HEAD=FACTORS; DATA=new_pairs)
            _tmp2704 = new(cls)
            _tmp2704.head = FACTORS
            _tmp2704.data = new_pairs
            if self.data==1:
                return _tmp2704
            #RETURN_NEW(HEAD=TERMS; DATA={_tmp2704: self.data})
            #NEWINSTANCE(OBJ=_tmp2725; HEAD=TERMS; DATA={_tmp2704: self.data})
            _tmp2725 = new(cls)
            _tmp2725.head = TERMS
            _tmp2725.data = {_tmp2704: self.data}
            return _tmp2725
        else:
            #DIV_NUMBER_SYMBOL(LHS=self; RHS=other)
            #DIV_VALUE_SYMBOL(VALUE=self.data; RHS=other)
            _tmp2746 = self.data
            if not _tmp2746:
                return cls.zero
            #NEWINSTANCE(OBJ=obj2; HEAD=FACTORS; DATA={other: -1})
            obj2 = new(cls)
            obj2.head = FACTORS
            obj2.data = {other: -1}
            if _tmp2746==1:
                return obj2
            #RETURN_NEW(HEAD=TERMS; DATA={obj2: _tmp2746})
            #NEWINSTANCE(OBJ=_tmp2760; HEAD=TERMS; DATA={obj2: _tmp2746})
            _tmp2760 = new(cls)
            _tmp2760.head = TERMS
            _tmp2760.data = {obj2: _tmp2746}
            return _tmp2760
    elif lhead is TERMS:
        if rhead is NUMBER:
            #DIV_TERMS_NUMBER(LHS=self; RHS=other)
            #DIV_TERMS_VALUE(VALUE=other.data; LHS=self)
            #MUL_TERMS_VALUE(LHS=self; VALUE=div(1,other.data,cls))
            #MUL_VALUE_TERMS(VALUE=div(1,other.data,cls); RHS=self)
            _tmp2795 = div(1,other.data,cls)
            if not _tmp2795:
                return cls.zero
            pairs = self.data
            if len(pairs)==1:
                t, c = pairs.items()[0]
                c = _tmp2795 * c
                if c==1:
                    return t
                #RETURN_NEW(HEAD=TERMS; DATA={t: c})
                #NEWINSTANCE(OBJ=_tmp2802; HEAD=TERMS; DATA={t: c})
                _tmp2802 = new(cls)
                _tmp2802.head = TERMS
                _tmp2802.data = {t: c}
                return _tmp2802
            if _tmp2795==1:
                return self
            pairs = {}
            for t,c in self.data.iteritems():
                pairs[t] = _tmp2795 * c
            #NEWINSTANCE(OBJ=obj;HEAD=TERMS; DATA=pairs)
            obj = new(cls)
            obj.head = TERMS
            obj.data = pairs
            coeff, terms = self._coeff_terms
            if terms is not None:
                c = coeff * _tmp2795
                if not c==1:
                    obj._coeff_terms = (c, terms)
            else:
                obj._coeff_terms = (_tmp2795, self)
            return obj
        elif rhead is TERMS:
            #DIV_TERMS_TERMS(LHS=self; RHS=other)
            
            if self==other:
                return cls.one
            lpairs = self.data
            rpairs = other.data
            if len(lpairs)==1:
                t1, c1 = lpairs.items()[0]
                if len(rpairs)==1:
                    t2, c2 = rpairs.items()[0]
                    c = div(c1, c2, cls)
                    if t2==t1:
                        return cls.convert(c)
                    if c==1:
                        #RETURN_NEW(HEAD=FACTORS; DATA={t1:1, t2:-1})
                        #NEWINSTANCE(OBJ=_tmp2830; HEAD=FACTORS; DATA={t1:1, t2:-1})
                        _tmp2830 = new(cls)
                        _tmp2830.head = FACTORS
                        _tmp2830.data = {t1:1, t2:-1}
                        return _tmp2830
                    #NEWINSTANCE(OBJ=_tmp2823; HEAD=FACTORS; DATA={t1:1, t2:-1})
                    _tmp2823 = new(cls)
                    _tmp2823.head = FACTORS
                    _tmp2823.data = {t1:1, t2:-1}
                else:
                    #NEWINSTANCE(OBJ=_tmp2823; HEAD=FACTORS; DATA={t1:1, other:-1})
                    _tmp2823 = new(cls)
                    _tmp2823.head = FACTORS
                    _tmp2823.data = {t1:1, other:-1}
                #RETURN_NEW(HEAD=TERMS; DATA={_tmp2823:c1})
                #NEWINSTANCE(OBJ=_tmp2858; HEAD=TERMS; DATA={_tmp2823:c1})
                _tmp2858 = new(cls)
                _tmp2858.head = TERMS
                _tmp2858.data = {_tmp2823:c1}
                return _tmp2858
            elif len(rpairs)==1:
                t2, c2 = rpairs.items()[0]
                c = div(1, c2, cls)
                if t2==self:
                    return cls.convert(c)
                _tmp2823 = self / t2
                #RETURN_NEW(HEAD=TERMS; DATA={_tmp2823:c})
                #NEWINSTANCE(OBJ=_tmp2872; HEAD=TERMS; DATA={_tmp2823:c})
                _tmp2872 = new(cls)
                _tmp2872.head = TERMS
                _tmp2872.data = {_tmp2823:c}
                return _tmp2872
            #RETURN_NEW(HEAD=FACTORS; DATA={self:1, other:-1})
            #NEWINSTANCE(OBJ=_tmp2886; HEAD=FACTORS; DATA={self:1, other:-1})
            _tmp2886 = new(cls)
            _tmp2886.head = FACTORS
            _tmp2886.data = {self:1, other:-1}
            return _tmp2886
        elif rhead is FACTORS:
            #DIV_TERMS_FACTORS(LHS=self; RHS=other)
            lpairs = self.data
            if len(lpairs)==1:
                t, c = lpairs.items()[0]
                t = t / other
                if t==cls.one:
                    return cls.convert(c)
                head = t.head
                if head is NUMBER:
                    #RETURN_NEW(HEAD=NUMBER; DATA=t.data * c)
                    #NEWINSTANCE(OBJ=_tmp2907; HEAD=NUMBER; DATA=t.data * c)
                    _tmp2907 = new(cls)
                    _tmp2907.head = NUMBER
                    _tmp2907.data = t.data * c
                    return _tmp2907
                elif head is TERMS:
                    #MUL_TERMS_VALUE(LHS=t; VALUE=c)
                    #MUL_VALUE_TERMS(VALUE=c; RHS=t)
                    _tmp2928 = c
                    if not _tmp2928:
                        return cls.zero
                    pairs = t.data
                    if len(pairs)==1:
                        t, c = pairs.items()[0]
                        c = _tmp2928 * c
                        if c==1:
                            return t
                        #RETURN_NEW(HEAD=TERMS; DATA={t: c})
                        #NEWINSTANCE(OBJ=_tmp2935; HEAD=TERMS; DATA={t: c})
                        _tmp2935 = new(cls)
                        _tmp2935.head = TERMS
                        _tmp2935.data = {t: c}
                        return _tmp2935
                    if _tmp2928==1:
                        return t
                    pairs = {}
                    for t,c in t.data.iteritems():
                        pairs[t] = _tmp2928 * c
                    #NEWINSTANCE(OBJ=obj;HEAD=TERMS; DATA=pairs)
                    obj = new(cls)
                    obj.head = TERMS
                    obj.data = pairs
                    coeff, terms = t._coeff_terms
                    if terms is not None:
                        c = coeff * _tmp2928
                        if not c==1:
                            obj._coeff_terms = (c, terms)
                    else:
                        obj._coeff_terms = (_tmp2928, t)
                    return obj
                else:
                    #MUL_SYMBOL_VALUE(LHS=t; VALUE=c)
                    #MUL_VALUE_SYMBOL(VALUE=c; RHS=t)
                    _tmp2963 = c
                    if not _tmp2963:
                        return cls.zero
                    if _tmp2963==1:
                        return t
                    #RETURN_NEW(HEAD=TERMS; DATA={t: _tmp2963})
                    #NEWINSTANCE(OBJ=_tmp2970; HEAD=TERMS; DATA={t: _tmp2963})
                    _tmp2970 = new(cls)
                    _tmp2970.head = TERMS
                    _tmp2970.data = {t: _tmp2963}
                    return _tmp2970
            #DIV_SYMBOL_FACTORS(LHS=self; RHS=other)
            pairs = other.data
            if len(pairs)==1:
                t, c = pairs.items()[0]
                if t==self:
                    c = 1 - c
                    if not c:
                        return cls.one
                    if c==1:
                        return t
                    else:
                        #RETURN_NEW(HEAD=FACTORS; DATA={t: c})
                        #NEWINSTANCE(OBJ=_tmp2991; HEAD=FACTORS; DATA={t: c})
                        _tmp2991 = new(cls)
                        _tmp2991.head = FACTORS
                        _tmp2991.data = {t: c}
                        return _tmp2991
                #RETURN_NEW(HEAD=FACTORS; DATA={t: -c, self: 1})
                #NEWINSTANCE(OBJ=_tmp3005; HEAD=FACTORS; DATA={t: -c, self: 1})
                _tmp3005 = new(cls)
                _tmp3005.head = FACTORS
                _tmp3005.data = {t: -c, self: 1}
                return _tmp3005
            #NEG_DICT_VALUES(DICT_IN=other.data; DICT_OUT=pairs)
            pairs = dict([(t, -c) for t,c in other.data.iteritems()])
            #MUL_DICT_SYMBOL(DICT=pairs; RHS=self)
            #ADD_TERM_VALUE_DICT(TERM=self; VALUE=1; DICT=pairs; DICT_GET=pairs.get; SIGN=+; USIGN=)
            _tmp3033 = pairs.get(self)
            if _tmp3033 is None:
                pairs[self] =  1
            else:
                _tmp3033 = _tmp3033 + 1
                if _tmp3033:
                    pairs[self] = _tmp3033
                else:
                    del pairs[self]
            #CANONIZE_FACTORS_DICT1(DICT=pairs)
            if not pairs:
                return cls.one
            if len(pairs)==1:
               t, c = pairs.items()[0]
               if c==1:
                   return t
               if t==cls.one:
                   return t
            #RETURN_NEW(HEAD=FACTORS; DATA=pairs)
            #NEWINSTANCE(OBJ=_tmp3047; HEAD=FACTORS; DATA=pairs)
            _tmp3047 = new(cls)
            _tmp3047.head = FACTORS
            _tmp3047.data = pairs
            return _tmp3047
        else:
            #DIV_TERMS_SYMBOL(LHS=self; RHS=other)
            
            pairs = self.data
            if len(pairs)==1:
                t, c = pairs.items()[0]
                if t==other:
                    return cls.convert(c)
                #NEWINSTANCE(OBJ=_tmp3061; HEAD=FACTORS; DATA={t:1, other: -1})
                _tmp3061 = new(cls)
                _tmp3061.head = FACTORS
                _tmp3061.data = {t:1, other: -1}
                #RETURN_NEW(HEAD=TERMS; DATA={_tmp3061: c})
                #NEWINSTANCE(OBJ=_tmp3075; HEAD=TERMS; DATA={_tmp3061: c})
                _tmp3075 = new(cls)
                _tmp3075.head = TERMS
                _tmp3075.data = {_tmp3061: c}
                return _tmp3075
            #RETURN_NEW(HEAD=FACTORS; DATA={self: 1, other: -1})
            #NEWINSTANCE(OBJ=_tmp3089; HEAD=FACTORS; DATA={self: 1, other: -1})
            _tmp3089 = new(cls)
            _tmp3089.head = FACTORS
            _tmp3089.data = {self: 1, other: -1}
            return _tmp3089
    elif lhead is FACTORS:
        if rhead is NUMBER:
            #DIV_FACTORS_NUMBER(LHS=self; RHS=other)
            #DIV_FACTORS_VALUE(VALUE=other.data; LHS=self)
            #MUL_FACTORS_VALUE(LHS=self; VALUE=div(1,other.data,cls))
            #MUL_SYMBOL_VALUE(VALUE=div(1,other.data,cls); LHS=self)
            #MUL_VALUE_SYMBOL(VALUE=div(1,other.data,cls); RHS=self)
            _tmp3131 = div(1,other.data,cls)
            if not _tmp3131:
                return cls.zero
            if _tmp3131==1:
                return self
            #RETURN_NEW(HEAD=TERMS; DATA={self: _tmp3131})
            #NEWINSTANCE(OBJ=_tmp3138; HEAD=TERMS; DATA={self: _tmp3131})
            _tmp3138 = new(cls)
            _tmp3138.head = TERMS
            _tmp3138.data = {self: _tmp3131}
            return _tmp3138
        elif rhead is TERMS:
            #DIV_FACTORS_TERMS(LHS=self; RHS=other)
            rpairs = other.data
            if len(rpairs)==1:
                t, c = rpairs.items()[0]
                t = self / t
                c = div(1, c, cls)
                if t==cls.one:
                    return cls.convert(c)
                head = t.head
                if head is NUMBER:
                    #RETURN_NEW(HEAD=NUMBER; DATA=t.data * c)
                    #NEWINSTANCE(OBJ=_tmp3159; HEAD=NUMBER; DATA=t.data * c)
                    _tmp3159 = new(cls)
                    _tmp3159.head = NUMBER
                    _tmp3159.data = t.data * c
                    return _tmp3159
                elif head is TERMS:
                    #MUL_TERMS_VALUE(LHS=t; VALUE=c)
                    #MUL_VALUE_TERMS(VALUE=c; RHS=t)
                    _tmp3180 = c
                    if not _tmp3180:
                        return cls.zero
                    pairs = t.data
                    if len(pairs)==1:
                        t, c = pairs.items()[0]
                        c = _tmp3180 * c
                        if c==1:
                            return t
                        #RETURN_NEW(HEAD=TERMS; DATA={t: c})
                        #NEWINSTANCE(OBJ=_tmp3187; HEAD=TERMS; DATA={t: c})
                        _tmp3187 = new(cls)
                        _tmp3187.head = TERMS
                        _tmp3187.data = {t: c}
                        return _tmp3187
                    if _tmp3180==1:
                        return t
                    pairs = {}
                    for t,c in t.data.iteritems():
                        pairs[t] = _tmp3180 * c
                    #NEWINSTANCE(OBJ=obj;HEAD=TERMS; DATA=pairs)
                    obj = new(cls)
                    obj.head = TERMS
                    obj.data = pairs
                    coeff, terms = t._coeff_terms
                    if terms is not None:
                        c = coeff * _tmp3180
                        if not c==1:
                            obj._coeff_terms = (c, terms)
                    else:
                        obj._coeff_terms = (_tmp3180, t)
                    return obj
                else:
                    #MUL_SYMBOL_VALUE(LHS=t; VALUE=c)
                    #MUL_VALUE_SYMBOL(VALUE=c; RHS=t)
                    _tmp3215 = c
                    if not _tmp3215:
                        return cls.zero
                    if _tmp3215==1:
                        return t
                    #RETURN_NEW(HEAD=TERMS; DATA={t: _tmp3215})
                    #NEWINSTANCE(OBJ=_tmp3222; HEAD=TERMS; DATA={t: _tmp3215})
                    _tmp3222 = new(cls)
                    _tmp3222.head = TERMS
                    _tmp3222.data = {t: _tmp3215}
                    return _tmp3222
            #DIV_FACTORS_SYMBOL(LHS=self; RHS=other)
            pairs = dict(self.data)
            #DIV_DICT_SYMBOL(RHS=other; DICT=pairs)
            #ADD_TERM_VALUE_DICT(TERM=other; VALUE=-1; DICT=pairs; DICT_GET=pairs.get; SIGN=+; USIGN=)
            _tmp3250 = pairs.get(other)
            if _tmp3250 is None:
                pairs[other] =  -1
            else:
                _tmp3250 = _tmp3250 + -1
                if _tmp3250:
                    pairs[other] = _tmp3250
                else:
                    del pairs[other]
            #CANONIZE_FACTORS_DICT1(DICT=pairs)
            if not pairs:
                return cls.one
            if len(pairs)==1:
               t, c = pairs.items()[0]
               if c==1:
                   return t
               if t==cls.one:
                   return t
            #RETURN_NEW(HEAD=FACTORS; DATA=pairs)
            #NEWINSTANCE(OBJ=_tmp3264; HEAD=FACTORS; DATA=pairs)
            _tmp3264 = new(cls)
            _tmp3264.head = FACTORS
            _tmp3264.data = pairs
            return _tmp3264
        elif rhead is FACTORS:
            #DIV_FACTORS_FACTORS(LHS=self; RHS=other)
            pairs = dict(self.data)
            pairs_get = pairs.get
            number = 1
            for t,c in other.data.iteritems():
                #MUL_FACTOR_VALUE_DICT(FACTOR=t; SIGN=-; USIGN=-; VALUE=c; DICT=pairs; DICT_GET=pairs_get; NUMBER=number)
                _tmp3285 = pairs_get(t)
                if _tmp3285 is None:
                    pairs[t] = - c
                else:
                    _tmp3285 = _tmp3285 - c
                    if type(_tmp3285) is cls and _tmp3285.head is NUMBER:
                        _tmp3285 = _tmp3285.data
                    if _tmp3285:
                        if t.head is NUMBER:
                            del pairs[t]
                            z, sym = try_power(t.data, _tmp3285)
                            if sym:
                                for t1, c1 in sym:
                                    #NEWINSTANCE(OBJ=tt; HEAD=NUMBER; DATA=t1)
                                    tt = new(cls)
                                    tt.head = NUMBER
                                    tt.data = t1
                                    #ADD_TERM_VALUE_DICT(DICT=pairs; DICT_GET=pairs_get; TERM=tt; VALUE=c1; SIGN=+; USIGN=)
                                    _tmp3299 = pairs_get(tt)
                                    if _tmp3299 is None:
                                        pairs[tt] =  c1
                                    else:
                                        _tmp3299 = _tmp3299 + c1
                                        if _tmp3299:
                                            pairs[tt] = _tmp3299
                                        else:
                                            del pairs[tt]
                            number = number * z
                        else:
                            pairs[t] = _tmp3285
                    else:
                        del pairs[t]
            #CANONIZE_FACTORS_DICT(DICT=pairs; NUMBER=number)
            if not pairs:
                if number is 1:
                    return cls.one
                return number
            if len(pairs)==1:
               t, c = pairs.items()[0]
               if c==1:
                   if number==1:
                       return t
                   #RETURN_NEW(HEAD=TERMS; DATA={t: number})
                   #NEWINSTANCE(OBJ=_tmp3313; HEAD=TERMS; DATA={t: number})
                   _tmp3313 = new(cls)
                   _tmp3313.head = TERMS
                   _tmp3313.data = {t: number}
                   return _tmp3313
               if t==cls.one:
                   return number
            if number==1:
                #RETURN_NEW(HEAD=FACTORS; DATA=pairs)
                #NEWINSTANCE(OBJ=_tmp3327; HEAD=FACTORS; DATA=pairs)
                _tmp3327 = new(cls)
                _tmp3327.head = FACTORS
                _tmp3327.data = pairs
                return _tmp3327
            #NEWINSTANCE(OBJ=_tmp3278; HEAD=FACTORS; DATA=pairs)
            _tmp3278 = new(cls)
            _tmp3278.head = FACTORS
            _tmp3278.data = pairs
            #RETURN_NEW(HEAD=TERMS; DATA={_tmp3278: number})
            #NEWINSTANCE(OBJ=_tmp3348; HEAD=TERMS; DATA={_tmp3278: number})
            _tmp3348 = new(cls)
            _tmp3348.head = TERMS
            _tmp3348.data = {_tmp3278: number}
            return _tmp3348
        else:
            #DIV_FACTORS_SYMBOL(LHS=self; RHS=other)
            pairs = dict(self.data)
            #DIV_DICT_SYMBOL(RHS=other; DICT=pairs)
            #ADD_TERM_VALUE_DICT(TERM=other; VALUE=-1; DICT=pairs; DICT_GET=pairs.get; SIGN=+; USIGN=)
            _tmp3376 = pairs.get(other)
            if _tmp3376 is None:
                pairs[other] =  -1
            else:
                _tmp3376 = _tmp3376 + -1
                if _tmp3376:
                    pairs[other] = _tmp3376
                else:
                    del pairs[other]
            #CANONIZE_FACTORS_DICT1(DICT=pairs)
            if not pairs:
                return cls.one
            if len(pairs)==1:
               t, c = pairs.items()[0]
               if c==1:
                   return t
               if t==cls.one:
                   return t
            #RETURN_NEW(HEAD=FACTORS; DATA=pairs)
            #NEWINSTANCE(OBJ=_tmp3390; HEAD=FACTORS; DATA=pairs)
            _tmp3390 = new(cls)
            _tmp3390.head = FACTORS
            _tmp3390.data = pairs
            return _tmp3390
    else:
        if rhead is NUMBER:
            #DIV_SYMBOL_NUMBER(LHS=self; RHS=other)
            #DIV_SYMBOL_VALUE(VALUE=other.data; LHS=self)
            #MUL_VALUE_SYMBOL(VALUE=div(1, other.data, cls); RHS=self)
            _tmp3418 = div(1, other.data, cls)
            if not _tmp3418:
                return cls.zero
            if _tmp3418==1:
                return self
            #RETURN_NEW(HEAD=TERMS; DATA={self: _tmp3418})
            #NEWINSTANCE(OBJ=_tmp3425; HEAD=TERMS; DATA={self: _tmp3418})
            _tmp3425 = new(cls)
            _tmp3425.head = TERMS
            _tmp3425.data = {self: _tmp3418}
            return _tmp3425
        elif rhead is TERMS:
            #DIV_SYMBOL_TERMS(LHS=self; RHS=other)
            pairs = other.data
            if len(pairs)==1:
                t,c = pairs.items()[0]
                if self==t:
                    return cls.convert(div(1, c, cls))
                #NEWINSTANCE(OBJ=_tmp3439; HEAD=FACTORS; DATA={self:1, t:-1})
                _tmp3439 = new(cls)
                _tmp3439.head = FACTORS
                _tmp3439.data = {self:1, t:-1}
                #RETURN_NEW(HEAD=TERMS; DATA={_tmp3439: div(1, c, cls)})
                #NEWINSTANCE(OBJ=_tmp3453; HEAD=TERMS; DATA={_tmp3439: div(1, c, cls)})
                _tmp3453 = new(cls)
                _tmp3453.head = TERMS
                _tmp3453.data = {_tmp3439: div(1, c, cls)}
                return _tmp3453
            #RETURN_NEW(HEAD=FACTORS; DATA={self:1, other:-1})
            #NEWINSTANCE(OBJ=_tmp3467; HEAD=FACTORS; DATA={self:1, other:-1})
            _tmp3467 = new(cls)
            _tmp3467.head = FACTORS
            _tmp3467.data = {self:1, other:-1}
            return _tmp3467
        elif rhead is FACTORS:
            #DIV_SYMBOL_FACTORS(LHS=self; RHS=other)
            pairs = other.data
            if len(pairs)==1:
                t, c = pairs.items()[0]
                if t==self:
                    c = 1 - c
                    if not c:
                        return cls.one
                    if c==1:
                        return t
                    else:
                        #RETURN_NEW(HEAD=FACTORS; DATA={t: c})
                        #NEWINSTANCE(OBJ=_tmp3488; HEAD=FACTORS; DATA={t: c})
                        _tmp3488 = new(cls)
                        _tmp3488.head = FACTORS
                        _tmp3488.data = {t: c}
                        return _tmp3488
                #RETURN_NEW(HEAD=FACTORS; DATA={t: -c, self: 1})
                #NEWINSTANCE(OBJ=_tmp3502; HEAD=FACTORS; DATA={t: -c, self: 1})
                _tmp3502 = new(cls)
                _tmp3502.head = FACTORS
                _tmp3502.data = {t: -c, self: 1}
                return _tmp3502
            #NEG_DICT_VALUES(DICT_IN=other.data; DICT_OUT=pairs)
            pairs = dict([(t, -c) for t,c in other.data.iteritems()])
            #MUL_DICT_SYMBOL(DICT=pairs; RHS=self)
            #ADD_TERM_VALUE_DICT(TERM=self; VALUE=1; DICT=pairs; DICT_GET=pairs.get; SIGN=+; USIGN=)
            _tmp3530 = pairs.get(self)
            if _tmp3530 is None:
                pairs[self] =  1
            else:
                _tmp3530 = _tmp3530 + 1
                if _tmp3530:
                    pairs[self] = _tmp3530
                else:
                    del pairs[self]
            #CANONIZE_FACTORS_DICT1(DICT=pairs)
            if not pairs:
                return cls.one
            if len(pairs)==1:
               t, c = pairs.items()[0]
               if c==1:
                   return t
               if t==cls.one:
                   return t
            #RETURN_NEW(HEAD=FACTORS; DATA=pairs)
            #NEWINSTANCE(OBJ=_tmp3544; HEAD=FACTORS; DATA=pairs)
            _tmp3544 = new(cls)
            _tmp3544.head = FACTORS
            _tmp3544.data = pairs
            return _tmp3544
        else:
            #DIV_SYMBOL_SYMBOL(LHS=self; RHS=other)
            if self == other:
                return cls.one
            #RETURN_NEW(HEAD=FACTORS; DATA={self: 1, other: -1})
            #NEWINSTANCE(OBJ=_tmp3565; HEAD=FACTORS; DATA={self: 1, other: -1})
            _tmp3565 = new(cls)
            _tmp3565.head = FACTORS
            _tmp3565.data = {self: 1, other: -1}
            return _tmp3565
