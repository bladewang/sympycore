<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.4.1: http://docutils.sourceforge.net/" />
<title>SympyCore Users Guide</title>
<meta name="authors" content="Pearu Peterson" />
<style type="text/css">

/*
:Author: David Goodger
:Contact: goodger@users.sourceforge.net
:Date: $Date: 2005-12-18 01:56:14 +0100 (Sun, 18 Dec 2005) $
:Revision: $Revision: 4224 $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin-left: 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left {
  clear: left }

img.align-right {
  clear: right }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font-family: serif ;
  font-size: 100% }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;
  background-color: #eeeeee }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

tt.docutils {
  background-color: #eeeeee }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="sympycore-users-guide">
<h1 class="title">SympyCore Users Guide</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr><th class="docinfo-name">Authors:</th>
<td>Pearu Peterson</td></tr>
<tr class="field"><th class="docinfo-name">Created:</th><td class="field-body">January 2008</td>
</tr>
</tbody>
</table>
<!-- -*- rest -*- -->
<!-- To verify examples, use command ``python run_doctest.py`` -->
<!-- To produce HTML file, use command ``rst2html userguide.rst html/userguide.html`` -->
<!-- To produce PDF file, use command ``rst2latex userguide.rst userguide.tex; pdflatex userguide.tex`` -->
<div class="contents topic">
<p class="topic-title first"><a id="contents" name="contents">Contents</a></p>
<ul class="simple">
<li><a class="reference" href="#introduction" id="id1" name="id1">Introduction</a></li>
<li><a class="reference" href="#getting-started" id="id2" name="id2">Getting Started</a></li>
<li><a class="reference" href="#the-cas-model" id="id3" name="id3">The CAS model</a></li>
<li><a class="reference" href="#package-structure" id="id4" name="id4">Package structure</a></li>
<li><a class="reference" href="#basic-methods" id="id5" name="id5">Basic methods</a><ul>
<li><a class="reference" href="#output-methods" id="id6" name="id6">Output methods</a></li>
<li><a class="reference" href="#conversation-methods" id="id7" name="id7">Conversation methods</a></li>
<li><a class="reference" href="#substitution-of-expressions" id="id8" name="id8">Substitution of expressions</a></li>
<li><a class="reference" href="#pattern-matching" id="id9" name="id9">Pattern matching</a></li>
<li><a class="reference" href="#checking-for-atomic-objects" id="id10" name="id10">Checking for atomic objects</a></li>
</ul>
</li>
<li><a class="reference" href="#primitive-algebra" id="id11" name="id11">Primitive algebra</a></li>
<li><a class="reference" href="#commutative-ring" id="id12" name="id12">Commutative ring</a><ul>
<li><a class="reference" href="#operations" id="id13" name="id13">Operations</a></li>
<li><a class="reference" href="#differentation" id="id14" name="id14">Differentation</a></li>
<li><a class="reference" href="#integration" id="id15" name="id15">Integration</a></li>
</ul>
</li>
<li><a class="reference" href="#commutative-ring-implementation" id="id16" name="id16">Commutative ring implementation</a></li>
</ul>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id1" id="introduction" name="introduction">Introduction</a></h1>
<p>The aim of the SympyCore project is to develop a robust, consistent,
and easy to extend Computer Algebra System model for Python.</p>
<p>SympyCore projects home page is <a class="reference" href="http://sympycore.googlecode.com/">http://sympycore.googlecode.com/</a>.</p>
<p>Editorial notes:
- This document is written in <a class="reference" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> format.</p>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id2" id="getting-started" name="getting-started">Getting Started</a></h1>
<p>To use SympyCore from Python, one needs to import the <tt class="docutils literal"><span class="pre">sympycore</span></tt> package:</p>
<pre class="literal-block">
&gt;&gt;&gt; from sympycore import *
</pre>
<p>The <tt class="docutils literal"><span class="pre">sympycore</span></tt> package provides <tt class="docutils literal"><span class="pre">Symbol</span></tt> and <tt class="docutils literal"><span class="pre">Number</span></tt> functions to
construct symbolic objects and numbers. By default, the symbolic
objects are the elements of <tt class="docutils literal"><span class="pre">Calculus</span></tt> algebra -- a commutative
ring of symbolic expressions where exponent algebra is also <tt class="docutils literal"><span class="pre">Calculus</span></tt>
algebra.</p>
<pre class="doctest-block">
&gt;&gt;&gt; x = Symbol('x')
&gt;&gt;&gt; n = Number(2,5)
&gt;&gt;&gt; x+n
Calculus('x + 2/5')
&gt;&gt;&gt; x,y,v,w=map(Symbol,'xyvw')
</pre>
<p>To construct expression from a string, use the corresponding algebra
class, for example,</p>
<pre class="doctest-block">
&gt;&gt;&gt; Calculus('x+y+1/4 + x**2')+x
Calculus('y + x**2 + 1/4 + 2*x')
</pre>
<p>XXX: need more examples on elementaty operations.</p>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id3" id="the-cas-model" name="the-cas-model">The CAS model</a></h1>
<p>Symbolic expressions represent mathematical concepts like numbers,
constants, variables, functions, operators, and various relations
between them. Symbolic objects, on the other hand, represent symbolic
expressions in a running computer program. The aim of a Computer
Algebra System (CAS) is to provide methods to manipulate symbolic
objects and by that manipulate symbolic expressions. These
manipulations of symbolic expressions have mathematical meaning when
the methods are consistent with the rules and theories from
mathematics.</p>
<p>There are many possible ways to represent a mathematical concept as a
structure of a computer program. SympyCore mimics mathematical
concepts via implementing the corresponding algebra and algebraic
operations in a class, say Algebra, that is derived from the
BasicAlgebra class. So, a symbolic object is an instance of the
Algebra class. This instance contains information about the
mathematical operator that when applied to operands forms the
corresponding symbolic object. The operator and operands of the given
symbolic object can be accessed via atrributes <tt class="docutils literal"><span class="pre">func</span></tt> and
<tt class="docutils literal"><span class="pre">args</span></tt>. The value of <tt class="docutils literal"><span class="pre">func</span></tt> is a callable object and <tt class="docutils literal"><span class="pre">args</span></tt> is a
sequence of symbolic objects. So, if <tt class="docutils literal"><span class="pre">A</span></tt> is a <tt class="docutils literal"><span class="pre">Algebra</span></tt> instance
then:</p>
<pre class="literal-block">
&lt;symbolic object&gt; = A.func(*A.args)
</pre>
<p>The actual value of <tt class="docutils literal"><span class="pre">func</span></tt> is defined by the <tt class="docutils literal"><span class="pre">Algebra</span></tt> class. For
example, in the case of calculus algebra class <tt class="docutils literal"><span class="pre">Calculus</span></tt>, the
<tt class="docutils literal"><span class="pre">func</span></tt> value can be <tt class="docutils literal"><span class="pre">Add</span></tt>, <tt class="docutils literal"><span class="pre">Mul</span></tt>, <tt class="docutils literal"><span class="pre">Pow</span></tt>, <tt class="docutils literal"><span class="pre">sin</span></tt>, <tt class="docutils literal"><span class="pre">log</span></tt>,
etc. If the symbolic object represents a symbol (eg a variable) or a
number of the algebra then <tt class="docutils literal"><span class="pre">func</span></tt> contains a callable that returns the
symbolic object (the <tt class="docutils literal"><span class="pre">args</span></tt> in this case will be an empty sequence).</p>
<p>The symbolic objects representing symbols and numbers can be
constructed via the <tt class="docutils literal"><span class="pre">Symbol</span></tt> and <tt class="docutils literal"><span class="pre">Number</span></tt> functions. Such symbolic
objects are called atomic.  One should note that functions <tt class="docutils literal"><span class="pre">Add</span></tt>,
<tt class="docutils literal"><span class="pre">Mul</span></tt>, <tt class="docutils literal"><span class="pre">Pow</span></tt>, <tt class="docutils literal"><span class="pre">Symbol</span></tt>, <tt class="docutils literal"><span class="pre">Number</span></tt>, etc are always specific to
the given algebra (in fact, they are defined as classmethods of the
corresponding algebra class).</p>
<p>While most of the algebra operators assume symbolic objects as their
operands then <tt class="docutils literal"><span class="pre">Symbol</span></tt> and <tt class="docutils literal"><span class="pre">Number</span></tt> functions may take various
Python objects as arguments. For example, the argument to
<tt class="docutils literal"><span class="pre">Calculus.Symbol</span></tt> can be any python object that is immutable (this
requirement comes from the fact terms of sums and factors of products
are internally saved as Python dictionary keys), and the arguments to
<tt class="docutils literal"><span class="pre">Calculus.Number</span></tt> can be Python number types such as <tt class="docutils literal"><span class="pre">int</span></tt>,
<tt class="docutils literal"><span class="pre">long</span></tt>, <tt class="docutils literal"><span class="pre">float</span></tt>, <tt class="docutils literal"><span class="pre">complex</span></tt> as well as <tt class="docutils literal"><span class="pre">Fraction</span></tt>, <tt class="docutils literal"><span class="pre">Float</span></tt>,
<tt class="docutils literal"><span class="pre">Complex</span></tt> instances (these are defined in <tt class="docutils literal"><span class="pre">sympycore.arithmetic</span></tt>
package).</p>
<p>One can construct symbolic objects from Python strings using them as
single arguments to algebra class constructor. For example,</p>
<pre class="doctest-block">
&gt;&gt;&gt; Calculus('a-3/4+b**2')
Calculus('a + b**2 - 3/4')
&gt;&gt;&gt; Calculus('a-3/4+b**2').func
&lt;bound method BasicType.Add of &lt;class 'sympycore.calculus.algebra.Calculus'&gt;&gt;
&gt;&gt;&gt; Calculus('a-3/4+b**2').args
[Calculus('a'), Calculus('-3/4'), Calculus('b**2')]
</pre>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id4" id="package-structure" name="package-structure">Package structure</a></h1>
<p>SympyCore project provides a python package <tt class="docutils literal"><span class="pre">sympycore</span></tt> that consists of
several modules and subpackages:</p>
<ol class="arabic">
<li><p class="first"><tt class="docutils literal"><span class="pre">core.py</span></tt> - provides a base class <tt class="docutils literal"><span class="pre">Basic</span></tt> to all symbolic
objects. Note that almost any (hashable) python object can be used
as an operand to algebraic operations (assuming the corresponding
algebra class accepts it) and hence it is not always necessary to
derive classes defining mathematical from <tt class="docutils literal"><span class="pre">Basic</span></tt>. Only classes
that could be used by other parts of the <tt class="docutils literal"><span class="pre">sympycore</span></tt> should be
derived from <tt class="docutils literal"><span class="pre">Basic</span></tt>. In such cases, these classes are available
via <tt class="docutils literal"><span class="pre">classes</span></tt> holder (also defined in <tt class="docutils literal"><span class="pre">core.py</span></tt>). For example,</p>
<pre class="doctest-block">
&gt;&gt;&gt; from sympycore.core import classes
&gt;&gt;&gt; classes.Calculus
&lt;class 'sympycore.calculus.algebra.Calculus'&gt;
&gt;&gt;&gt; classes.Unit
&lt;class 'sympycore.physics.units.Unit'&gt;
&gt;&gt;&gt; classes.CommutativeRingWithPairs
&lt;class 'sympycore.basealgebra.pairs.CommutativeRingWithPairs'&gt;
</pre>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">arithmetic/</span></tt> - provides <tt class="docutils literal"><span class="pre">Fraction</span></tt>, <tt class="docutils literal"><span class="pre">Float</span></tt>, <tt class="docutils literal"><span class="pre">Complex</span></tt>
classes that represent fractions, multiprecision floating point
numbers, and complex numbers with rational parts. This package also
defines symbols like <tt class="docutils literal"><span class="pre">oo</span></tt>, <tt class="docutils literal"><span class="pre">zoo</span></tt>, <tt class="docutils literal"><span class="pre">undefined</span></tt> that extend the
number sets with infinities and undefined symbols (eg <tt class="docutils literal"><span class="pre">0/0</span> <span class="pre">-&gt;</span>
<span class="pre">undefined</span></tt>) to make the number sets closed with respect to all
algebraic operations: <tt class="docutils literal"><span class="pre">+</span></tt>, <tt class="docutils literal"><span class="pre">-</span></tt>, <tt class="docutils literal"><span class="pre">*</span></tt>, <tt class="docutils literal"><span class="pre">/</span></tt>, <tt class="docutils literal"><span class="pre">**</span></tt>. For more
information about the package, see [section on number theory
support].</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">basealgebra/</span></tt> - provides abstract base classes representing
algebras: <tt class="docutils literal"><span class="pre">BasicAlgebra</span></tt>, <tt class="docutils literal"><span class="pre">CommutativeRing</span></tt>, etc, and base
classes for algebras with implementations: <tt class="docutils literal"><span class="pre">Primitive</span></tt>,
<tt class="docutils literal"><span class="pre">CommutativeRingWithPairs</span></tt>, etc.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">calculus/</span></tt> - provides class <tt class="docutils literal"><span class="pre">Calculus</span></tt> that represents the
algebra of symbolic expressions. The <tt class="docutils literal"><span class="pre">Calculus</span></tt> class defines the
default algebra in <tt class="docutils literal"><span class="pre">sympycore</span></tt>. For more information, see
[section on calculus].  <tt class="docutils literal"><span class="pre">calculus/functions/</span></tt> - provides symbolic
functions like <tt class="docutils literal"><span class="pre">exp</span></tt>, <tt class="docutils literal"><span class="pre">log</span></tt>, <tt class="docutils literal"><span class="pre">sin</span></tt>, <tt class="docutils literal"><span class="pre">cos</span></tt>, <tt class="docutils literal"><span class="pre">tan</span></tt>,
<tt class="docutils literal"><span class="pre">cot</span></tt>, <tt class="docutils literal"><span class="pre">sqrt</span></tt>, ...</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">physics/</span></tt> - provides class <tt class="docutils literal"><span class="pre">Unit</span></tt> that represents the algebra
of symbolic expressions of physical quantities. For more
information, see [section on physics].</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">polynomials/</span></tt> - provides classes <tt class="docutils literal"><span class="pre">Polynomial</span></tt>,
<tt class="docutils literal"><span class="pre">UnivariatePolynomial</span></tt>, <tt class="docutils literal"><span class="pre">MultivariatePolynomial</span></tt> to represent
the algebras of polynomials with symbols, univariate polynomials in
(coefficient:exponent) form, and multivariate polynomials in
(coefficients:exponents) form, respectively. For more information,
see [section on polynomials].</p>
</li>
</ol>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id5" id="basic-methods" name="basic-methods">Basic methods</a></h1>
<p>In <tt class="docutils literal"><span class="pre">sympycore</span></tt> all symbolic objects are assumed to be immutable. So, the
manipulation of symbolic objects means creating new symbolic objects
from the parts of existing ones.</p>
<p>There are many methods that can be used to retrive information and
subexpressions from a symbolic object. The most generic method is to
use attribute pair of <tt class="docutils literal"><span class="pre">func</span></tt> and <tt class="docutils literal"><span class="pre">args</span></tt> as described
above. However, many such methods are also algebra specific, for
example, classes of commutative rings have methods like
<tt class="docutils literal"><span class="pre">as_Add_args</span></tt>, <tt class="docutils literal"><span class="pre">as_Mul_args</span></tt>, etc for retriving the operands of
operations and <tt class="docutils literal"><span class="pre">Add</span></tt>, <tt class="docutils literal"><span class="pre">Mul</span></tt>, etc for constructing new symbolic
objects representing addition, multiplication, etc operations. For
more information about such methods, see sections describing the
particular algebra classes.</p>
<div class="section">
<h2><a class="toc-backref" href="#id6" id="output-methods" name="output-methods">Output methods</a></h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">str(&lt;symbolic</span> <span class="pre">object&gt;)</span></tt></dt>
<dd><p class="first">return a nice string representation of the symbolic object. For example,</p>
<pre class="last doctest-block">
&gt;&gt;&gt; expr = Calculus('-x + 2')
&gt;&gt;&gt; str(expr)
'2 - x'
</pre>
</dd>
<dt><tt class="docutils literal"><span class="pre">repr(&lt;symbolic</span> <span class="pre">object&gt;)</span></tt></dt>
<dd><p class="first">return a string representation of the symbolic object that can be
used to reproduce an equal object:</p>
<pre class="last doctest-block">
&gt;&gt;&gt; expr=Calculus('-x+2')
&gt;&gt;&gt; repr(expr)
&quot;Calculus('2 - x')&quot;
</pre>
</dd>
<dt><tt class="docutils literal"><span class="pre">&lt;symbolic</span> <span class="pre">object&gt;.as_tree()</span></tt></dt>
<dd><p class="first">return a tree string representation of the symbolic object. For example,</p>
<pre class="doctest-block">
&gt;&gt;&gt; expr = Calculus('-x + 2+y**3')
&gt;&gt;&gt; print expr.as_tree()
Calculus:
ADD[
  -1:SYMBOL[x]
  1:MUL[
  1:  3:SYMBOL[y]
  1:]
  2:NUMBER[1]
]
</pre>
<p class="last">where the first line shows the name of a algebra class following the
content of the symbolic object in tree form. Note how are
represented the coefficients and exponents of the example
subexpressions.</p>
</dd>
</dl>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id7" id="conversation-methods" name="conversation-methods">Conversation methods</a></h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">&lt;symbolic</span> <span class="pre">object&gt;.as_primitive()</span></tt></dt>
<dd><p class="first">return symbolic object as an instance of <tt class="docutils literal"><span class="pre">PrimitiveAlgebra</span></tt> class. All
algebra classes must implement <tt class="docutils literal"><span class="pre">as_primitive</span></tt> method as this allows
converting symbolic objects from one algebra to another that is
compatible with respect to algebraic operations. Also, producing the
string representations of symbolic objects is done via converting
them to PrimitiveAlgebra that implements the corresponding printing
method. For example,</p>
<pre class="last doctest-block">
&gt;&gt;&gt; expr
Calculus('2 + y**3 - x')
&gt;&gt;&gt; expr.as_primitive()
PrimitiveAlgebra('2 + y**3 - x')
</pre>
</dd>
<dt><tt class="docutils literal"><span class="pre">&lt;symbolic</span> <span class="pre">object&gt;.as_algebra(&lt;algebra</span> <span class="pre">class&gt;)</span></tt></dt>
<dd><p class="first">return symbolic object as an instance of given algebra class. The
transformation is done by first converting the symbolic object to
<tt class="docutils literal"><span class="pre">PrimitiveAlgebra</span></tt> instance which in turn is converted to the instance
of targer algebra class by executing the corresponding target
algebra operators on operands. For example,</p>
<pre class="last doctest-block">
&gt;&gt;&gt; expr = Calculus('-x + 2')
&gt;&gt;&gt; print expr.as_tree()
Calculus:
ADD[
  -1:SYMBOL[x]
  2:NUMBER[1]
]
&gt;&gt;&gt; print expr.as_algebra(PrimitiveAlgebra).as_tree()
PrimitiveAlgebra:
ADD[
  NEG[
    SYMBOL[x]
  ]
  NUMBER[2]
]
&gt;&gt;&gt; print expr.as_algebra(CommutativeRingWithPairs).as_tree()
CommutativeRingWithPairs:
ADD[
  -1:SYMBOL[x]
  2:NUMBER[1]
]
</pre>
</dd>
</dl>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id8" id="substitution-of-expressions" name="substitution-of-expressions">Substitution of expressions</a></h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">&lt;symbolic</span> <span class="pre">object&gt;.subs(&lt;sub-expr&gt;,</span> <span class="pre">&lt;new-expr&gt;)</span></tt></dt>
<dd><p class="first">return a copy of <tt class="docutils literal"><span class="pre">&lt;symbolic</span> <span class="pre">object&gt;</span></tt> with all occurances of
<tt class="docutils literal"><span class="pre">&lt;sub-expr&gt;</span></tt> replaced with <tt class="docutils literal"><span class="pre">&lt;new-expr&gt;</span></tt>. For example,</p>
<pre class="last doctest-block">
&gt;&gt;&gt; expr = Calculus('-x + 2+y**3')
&gt;&gt;&gt; expr
Calculus('2 + y**3 - x')
&gt;&gt;&gt; expr.subs('y', '2*z')
Calculus('2 + 8*z**3 - x')
</pre>
</dd>
<dt><tt class="docutils literal"><span class="pre">&lt;symbolic</span> <span class="pre">object&gt;.subs([(&lt;subexpr1&gt;,</span> <span class="pre">&lt;newexpr1&gt;),</span> <span class="pre">(&lt;subexpr2&gt;,</span> <span class="pre">&lt;newexpr2&gt;),</span> <span class="pre">...])</span></tt></dt>
<dd><p class="first">is equivalent to <tt class="docutils literal"><span class="pre">&lt;symbolic</span> <span class="pre">object&gt;.subs(&lt;subexp1&gt;,</span>
<span class="pre">&lt;newexpr1&gt;).subs(&lt;subexpr2&gt;,</span> <span class="pre">&lt;newexpr2&gt;).subs</span></tt>. For example,</p>
<pre class="last doctest-block">
&gt;&gt;&gt; expr
Calculus('2 + y**3 - x')
&gt;&gt;&gt; expr.subs([('y', '2*z'),('z', 2)])
Calculus('66 - x')
</pre>
</dd>
</dl>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id9" id="pattern-matching" name="pattern-matching">Pattern matching</a></h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">&lt;symbolic</span> <span class="pre">object&gt;.match(&lt;pattern-expr&gt;</span> <span class="pre">[,</span> <span class="pre">&lt;wildcard1&gt;,</span> <span class="pre">&lt;wildcard2&gt;</span> <span class="pre">...])</span></tt></dt>
<dd><p class="first">check if the give symbolic object matches given pattern. Pattern
expression may contain wild symbols that match arbitrary
expressions, the <tt class="docutils literal"><span class="pre">wildcard</span></tt> must be then the corresponding
symbol. Wild symbols can be matched also conditionally, then the
<tt class="docutils literal"><span class="pre">&lt;wildcard&gt;</span></tt> argument must be a tuple <tt class="docutils literal"><span class="pre">(&lt;wild-symbol&gt;,</span> <span class="pre">&lt;predicate&gt;)</span></tt>,
where <tt class="docutils literal"><span class="pre">&lt;predicate&gt;</span></tt> is a single-argument function returning <tt class="docutils literal"><span class="pre">True</span></tt> if
wild symbol matches the expression in argument. If the match is not
found then the method returns. Otherwise it will return a dictionary
object such that the following condition holds:</p>
<pre class="literal-block">
pattern.subs(expr.match(pattern, ...).items()) == expr
</pre>
<p>For example,</p>
<pre class="last doctest-block">
&gt;&gt;&gt; expr = 3*x + 4*y
&gt;&gt;&gt; pattern = v*x + w*y
&gt;&gt;&gt; d = expr.match(pattern, v, w)
&gt;&gt;&gt; print 'v=',d.get(v)
v= 3
&gt;&gt;&gt; print 'w=',d.get(w)
w= 4
&gt;&gt;&gt; pattern.subs(d.items())==expr
True
</pre>
</dd>
</dl>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id10" id="checking-for-atomic-objects" name="checking-for-atomic-objects">Checking for atomic objects</a></h2>
<p>A symbolic object is atomic if <tt class="docutils literal"><span class="pre">&lt;symbolic</span> <span class="pre">object&gt;.args</span> <span class="pre">==</span> <span class="pre">()</span></tt>.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">&lt;symbolic</span> <span class="pre">object&gt;.symbols</span></tt></dt>
<dd>is a property that holds a set of all atomic symbols in the given
symbolic expression.</dd>
<dt><tt class="docutils literal"><span class="pre">&lt;symbolic</span> <span class="pre">object&gt;.has(&lt;symbol&gt;)</span></tt></dt>
<dd>returns <tt class="docutils literal"><span class="pre">True</span></tt> if the symbolic expression contains <tt class="docutils literal"><span class="pre">&lt;symbol&gt;</span></tt>.</dd>
</dl>
</div>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id11" id="primitive-algebra" name="primitive-algebra">Primitive algebra</a></h1>
<p>XXX: explain <tt class="docutils literal"><span class="pre">PrimitiveAlgebra</span></tt> class.</p>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id12" id="commutative-ring" name="commutative-ring">Commutative ring</a></h1>
<p>In SympyCore a commutative ring is represented by an abstract class
<tt class="docutils literal"><span class="pre">CommutativeRing</span></tt>.  The <tt class="docutils literal"><span class="pre">CommutativeRing</span></tt> class defines support
for addition, substraction, multiplication, division, and
exponentiation operations.</p>
<div class="section">
<h2><a class="toc-backref" href="#id13" id="operations" name="operations">Operations</a></h2>
<p>Classes deriving from <tt class="docutils literal"><span class="pre">CommutativeRing</span></tt> must define a number of
method pairs <tt class="docutils literal"><span class="pre">(Operation,</span> <span class="pre">as_Operation_args)</span></tt> that satisfy the
following condition:</p>
<pre class="literal-block">
cls.Operation(*obj.as_Operation_args()) == obj
</pre>
<p>Here <tt class="docutils literal"><span class="pre">Operation</span></tt> can be <tt class="docutils literal"><span class="pre">Add</span></tt>, <tt class="docutils literal"><span class="pre">Mul</span></tt>, <tt class="docutils literal"><span class="pre">Terms</span></tt>, <tt class="docutils literal"><span class="pre">Factors</span></tt>,
<tt class="docutils literal"><span class="pre">Pow</span></tt>, <tt class="docutils literal"><span class="pre">Log</span></tt>. For example,</p>
<pre class="doctest-block">
&gt;&gt;&gt; print map(str, (2*x+y).as_Add_args())
['y', '2*x']
&gt;&gt;&gt; print map(str, (2*x+y).as_Mul_args())
['y + 2*x']
&gt;&gt;&gt; print map(str, (2*x+y).as_Pow_args())
['y + 2*x', '1']
&gt;&gt;&gt; print (2*x+y).as_Terms_args()
[(Calculus('y'), 1), (Calculus('x'), 2)]
</pre>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id14" id="differentation" name="differentation">Differentation</a></h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">&lt;symbolic</span> <span class="pre">object&gt;.diff(*symbols)</span></tt></dt>
<dd><p class="first">return a derivative of symbolic expression with respect to given
symbols. The diff methods argument can also be a positive integer
after some symbol argument. Then the derivative is computed given
number of times with respect to the last symbol.
For example,</p>
<pre class="last doctest-block">
&gt;&gt;&gt; print sin(x*y).diff(x)
y*cos(x*y)
&gt;&gt;&gt; print sin(x*y).diff(x,y)
cos(x*y) - x*y*sin(x*y)
&gt;&gt;&gt; print sin(x*y).diff(x,4)
sin(x*y)*y**4
</pre>
</dd>
</dl>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id15" id="integration" name="integration">Integration</a></h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">&lt;symbolic</span> <span class="pre">object&gt;.integrate(&lt;symbol&gt;,</span> <span class="pre">integrator=None)</span></tt></dt>
<dd><p class="first">return an antiderivative of a symbolic expression with respect to
<tt class="docutils literal"><span class="pre">&lt;symbol&gt;</span></tt>.
For example,</p>
<pre class="last doctest-block">
&gt;&gt;&gt; from sympycore import *
&gt;&gt;&gt; print (x**2 + x*y).integrate(x)
1/2*y*x**2 + 1/3*x**3
</pre>
</dd>
</dl>
</div>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id16" id="commutative-ring-implementation" name="commutative-ring-implementation">Commutative ring implementation</a></h1>
<p>Commutative ring operations are implemented in the class
<tt class="docutils literal"><span class="pre">CommutativeRingWithPairs</span></tt> (derived from <tt class="docutils literal"><span class="pre">CommutativeRing</span></tt>).</p>
</div>
</div>
</body>
</html>
